---
title: "PRO file format"
regenerate: true
---
    <div class="title_main">PRO file format</div>
    <br />
    <div class="fileHeader">Applies to:</div>
    <div class="indent1"> BG2, BG2: ToB, BGEE </div><br />

    <div class="fileHeader">General Description</div>
    <div class="indent1">
      This file format describes projectiles, and the files are referenced spells and projectile weapons. Projectile files can control:<br />
      <ul>
        <li>Projectile graphics</li>
        <li>Projectile speed</li>
        <li>Projectile area of effect</li>
        <li>Projectile sound</li>
      </ul>
      These files have constant length 256 bytes (no BAM), 512 bytes (single target), or 768 bytes (area of effect).
    </div>
    <br />

    <div class="fileHeader">Detailed Description</div>
    <div class="indent1">
      <br />
      <table border="1" width="98%">
        <colgroup>
          <col width="5%" />
          <col width="12%" />
           <col width="*" />
        </colgroup>
        <thead>
          <tr>
            <th>Offset</th>
            <th>Size (datatype)</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
        <tr>
          <td>0x00000</td>
          <td>4 (char array)</td>
          <td>Signature ('PRO ')</td>
        </tr>
        <tr>
          <td>0x00004</td>
          <td>4 (char array)</td>
          <td>Version ('V1.0')</td>
        </tr>
        <tr>
          <td>0x00008</td>
          <td>2 (word)</td>
          <td><b><a name="0x8">Projectile Type</a></b>
            <ul>
              <li>
                0 &longrightarrow; <b><a name="0x8_0">No Projectile</a></b>
                <ul>
                  <li>Suppresses: All fields except <code><a href="#ExtFlags_BIT20">Display String</a></code> and <code><a href="#0x30">Displayed String</a></code>, which function as normal.</li>
                  <li>No Traveling Projectile, hits instantly (truly instant – function during Time Stop).</li>
                  <li>Dependency: Spell Target(<code>Creature</code>).</li>
                  <li>
                    This projectile type is functionally identical to the hardcoded projectile: <code>#0|<a href="../../files/ids/bgee/projectl.htm">PROJECTL.IDS</a> / #1|<a href="../../files/ids/bgee/missile.htm">MISSILE.IDS</a></code>
                    <ul>
                      <li>This is projectile <code>#1|None</code> in Near Infinity, not <code>#0|Default</code>.</li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>
                1 &longrightarrow; <b><a name="0x8_1">No BAM</a></b>
                <ul>
                  <li>Suppresses: All fields except <code><a href="#ExtFlags_BIT20">Display String</a></code> and <code><a href="#0x30">Displayed String</a></code>, which function as normal.</li>
                  <li>No Traveling Projectile, never impacts.</li>
                </ul>
              </li>

              <li>
                2 &longrightarrow; <b><a name="0x8_2">Single Target</a></b>
                <ul>
                  <li>Activates: <code>0x100 – 0x1ff</code></li>
                </ul>
              </li>

              <li>
                3 &longrightarrow; <b><a name="0x8_3">Area of Effect</a></b>
                <ul>
                  <li>Activates: <code>0x200 – 0x2ff</code></li>
                </ul>
              </li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>0x0000a</td>
          <td>2 (word)</td>
          <td>
            <b><a name="0xA">Projectile Speed</a></b> (<code>0x01 to 0xFF</code>)
            <ul>
              <li>
                Traveling Projectile: Movement speed (pixels/tick)
                <ul>
                  <li>w/ <code><a href="#ExtFlags_BIT10">Multiple Projectile</a></code>: Arc Strength</li>
                  <li>w/ <code><a href="#ExtFlags_BIT14">Lined up AoE</a></code>: Animation Density (affects how many instances are displayed between target and caster)</li>
                  <li>w/ <code><a href="#ExtFlags_BIT13">Comet</a></code>: Vertical Offset and Movement Speed.</li>
                </ul>
              </li>
              <li><code><a href="#0x228">Spread Animation</a></code>: Animation Density – Pixels(radius) between Animation Rings</li>
              <li><code><a href="#0x230">Ring Animation</a></code>: Expanding Movement Speed (Pixels/tick)</li>
              <li><code><a href="#0x238">Area Sound</a></code>: <code>Duration = <a href="#0x206">Explosion Size</a> / <a href="#0xA">Speed</a></code> (in ticks)</li>
            </ul>
          </td>
        </tr>

        <tr>
          <td>0x0000c</td>
          <td>4 (dword)</td>
          <td>Sparking flags
            <ul>
              <li>
                bit 0 &longrightarrow; <b><a name="Behavior_BIT0">Show sparkle</a></b>
                <ul>
                  <li>Sparks are identical in appearance to those created by <a href="../../opcodes/bgee.htm#op41">opcode #41</a>, using the <code>Shower</code> option.</li>
                </ul>
              </li>

              <li>
                bit 1 &longrightarrow; <b><a name="Behavior_BIT1">Use z coordinate</a></b>
                <ul>
                  <li>Traveling Projectile begins at caster's vertical height offset.</li>
                </ul>
              </li>

              <li>
                bit 2 &longrightarrow; <b><a name="Behavior_BIT2">Loop fire sound</a></b>
                <ul>
                  <li><code><a href="#0x10">Fire Sound</a></code> loops until all repetitions have fired.</li>
                </ul>
              </li>

              <li>
                bit 3 &longrightarrow; <b><a name="Behavior_BIT3">Loop impact sound</a></b>
                <ul>
                  <li><code><a href="#0x18">Impact Sound</a></code> loops until all frequencies have expired.</li>
                </ul>
              </li>

              <li>
                bit 4 &longrightarrow; <b><a name="Behavior_BIT4">Do not affect direct target / Ignore center</a></b>
                <ul>
                  <li>
                    The Original Caster is not a valid target for <code><a href="#0x21A">Explosion Projectile</a></code>s.
                    <ul>
                      <li>This feature only works in <code><a href="#0x8_3">Area-Effect</a></code> projectiles.</li>
                    </ul>
                  </li>
                  <li>
                    Enables subspells to check Magic Resistance when applied through <a href="../../opcodes/bgee.htm#op146">opcode #146</a><code><sup><small>*</small></sup>p2=2</code>/<a href="../../opcodes/bgee.htm#op326">opcode #326</a>/<a href="../../opcodes/bgee.htm#op333">opcode #333</a>.
                    <ul>
                      <li>Without this bit, the secondary targets (i.e., all those hit by the subspell's projectile) would not get a Magic Resistance check, but the other checks would still occur as normal (<code>power</code>, <code>saves</code>, <code>probability</code>, etc...).</li>
                      <li>This feature works in either <code><a href="#0x8_2">Single-target</a></code> or <code><a href="#0x8_3">Area-Effect</a></code> projectiles.</li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>bit 5 &longrightarrow; <b><a name="Behavior_BIT5">Draw below animate objects</a></b></li>

              <li>
                bit 6 &longrightarrow; <b><a name="Behavior_BIT6">Allow saving game</a></b> (EE)
                <ul>
                  <li>Prevents ongoing AoE projectiles from disabling Saving while they are active.</li>
                </ul>
              </li>

              <li>bit 7 &longrightarrow; <b><a name="Behavior_BIT7">Loop spread animation</a></b> (EE)</li>
            </ul>
            Further bits are unused.
          </td>
        </tr>

        <tr>
          <td>0x00010</td>
          <td>8 (resref)</td>
          <td>
            <b><a name="0x10">Fire Sound</a></b> (<a href="wavc_v1.htm">WAVC file</a>) (travelling)
            <ul>
              <li>Sound begins playing immediately.</li>
            </ul>
          </td>
        </tr>

        <tr>
          <td>0x00018</td>
          <td>8 (resref)</td>
          <td>
            <b><a name="0x18">Impact Sound</a></b> (<a href="wavc_v1.htm">WAVC file</a>) (explosion/reach destination)
            <ul>
              <li>Sound begins playing when Traveling Projectile reaches target.</li>
            </ul>
          </td>
        </tr>

        <tr>
          <td>0x00020</td>
          <td>8 (resref)</td>
          <td>
            <b><a name="0x20">Source Animation</a></b> (<a href="vef_v1.htm">VEF</a> &gt; <a href="vvc_v1.htm">VVC</a> &gt; <a href="bam_v1.htm">BAM</a>)
            <ul>
              <li>Animation travels to targeted location at &plus;50&percnt; speed.</li>
              <li>Animation plays only once, terminating when it ends.</li>
              <li>Looping animations continue to play until they reach the target.</li>
            </ul>
          </td>
        </tr>

        <tr>
          <td>0x00028</td>
          <td>2 (word)</td>
          <td>
            <b><a name="0x28">Particle Color</a></b> (from <a href="../../files/2da/2da_bgee/sprklclr.htm">SPRKCLR.2DA</a>)
            <ul>
              <li>Color of Sparks created by <code><a href="#Behavior_BIT0">Show Sparks</a></code>.</li>
            </ul>
          </td>
        </tr>

        <tr>
          <td colspan="3"><b>The following fields are used by Enhanced Editions games only:</b></td>
        </tr>

        <tr>
          <td>0x0002a</td>
          <td>2 (word)</td>
          <td>
            <b><a name="0x2A">Projectile Width</a></b>
            <ul>
              <li>
                w/ <code><a href="#ExtFlags_BIT1">Pass Target</a></code>: Proximity Radius (pixels) of Traveling Projectile.
                <ul>
                  <li>Value is Horizontal Pixels, &frac34; value is Vertical Pixels, <code>16 (12) = 1 foot</code>.</li>
                  <li>Radius will be 2 more pixels than specified value.</li>
                </ul>
              </li>
              <li>
                w/ <code><a href="#ExtFlags_BIT13">Comet</a></code>: Relative horizontal offset of Traveling Projectile origin.
                <ul>
                  <li>The exact formula is unknown as of now...</li>
                </ul>
              </li>
            </ul>
          </td>
        </tr>

        <tr>
          <td>0x0002c</td>
          <td>4 (dword)</td>
          <td>Extended flags
            <ul>
              <li>
                Bit 0 &longrightarrow; <b><a name="ExtFlags_BIT0">Bounce from walls</a></b>
                <ul>
                  <li>
                    When <code><a href="#0x8">Projectile Type</a></code> is <code><a href="#0x8_2">Single Target</a></code>:
                    <ul>
                      <li>Compatibility: only functions in combination with <code><a href="#ExtFlags_BIT1">Pass Target</a></code></li>
                    </ul>
                  </li>
                  <li>
                    When <code><a href="#0x8">Projectile Type</a></code> is <code><a href="#0x8_3">Area Effect</a></code>:
                    <ul>
                      <li>
                        Dependency: Spell Target(<code>Creature</code>)
                        <ul>
                          <li>Alters the <code><a href="#0x214">Secondary Projectile</a></code> to deliver effects (normally it does not).</li>
                          <li>Alters the <code><a href="#0x214">Secondary Projectile</a></code> to originate from the targeted creature, rather than the caster.</li>
                          <li>The <code><a href="#0x214">Secondary Projectile</a></code> still requires <code><a href="#AreaFlags_BIT4">Secondary Projectile</a></code>.</li>
                          <li>The <code><a href="#0x214">Secondary Projectile</a></code> will be oriented in a random direction.</li>
                          <li>Compatibility: with <code><a href="#AreaFlags_BIT11">Cone-shaped</a></code>, the <code><a href="#0x214">Secondary Projectile</a></code> will instead target the caster's location (but not the caster directly).</li>
                          <li>
                            The Traveling Projectile of the <code><a href="#0x214">Secondary Projectile</a></code> will terminate after a number of ticks equal to <code><a href="#0x210">Explosion Frequency</a></code>.
                            <ul>
                              <li>It will need to impact (<code><a href="#0x8_2">Single Target</a></code>) or explode (<code><a href="#0x8_3">Area Effect</a></code>) before then.</li>
                              <li>Compatibility: projectiles using <code><a href="#ExtFlags_BIT29">Limited Path Count</a></code> travel for their normal distance/duration.</li>
                            </ul>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>
                Bit 1 &longrightarrow; <b><a name="ExtFlags_BIT1">Pass target</a></b>
                <ul>
                  <li>
                    Projectile travels in straight line (is not homing), hitting all creatures within range of its current location every <code>2</code> ticks.
                    <ul>
                      <li>The projectile targets each creature only once unless <code><a href="#ExtFlags_BIT0">Bounce from Walls</a></code> is set at which point during the bounce, the targets are cleared and the projectile can target previously hit creatures once more (as expected).</li>
                    </ul>
                  </li>
                  <li>Compatibility: <code><a href="#ExtFlags_BIT10">Multiple Projectile</a></code> functions as normal except that it will not arc this projectile.</li>
                  <li>
                    Priority:
                    <ul>
                      <li>Suppressed by <code><a href="#AreaFlags_BIT11">Cone-shaped</a></code></li>
                      <li>Suppressed by or incompatible with <code><a href="#ExtFlags_BIT12">Falling Path</a></code> or <code><a href="#ExtFlags_BIT13">Comet</a></code></li>
                    </ul>
                  </li>
                  <li>
                    Suppresses:
                    <ul>
                      <li><code><a href="#ExtFlags_BIT15">Rectangular AoE</a></code>, <code><a href="#ExtFlags_BIT21">Random Path</a></code></li>
                      <li>(<code>0x200 – 0x2ff</code>): all Area Effect fields except <code><a href="#AreaFlags_BIT11">Cone-shaped</a></code></li>
                    </ul>
                  </li>
                  <li><code><a href="#0x8">Projectile Type</a></code> must be either <code><a href="#0x8_2">Single Target</a></code> or <code><a href="#0x8_3">Area Effect</a></code></li>
                  <li>Effect Radius: <code><a href="#0x2A">Projectile Width</a> + 2 pixels (1:horizontal, &frac34;:vertical)</code></li>
                  <li>Duration: Projectile continues until reaching map edge.</li>
                  <li>Example: (Smashing Wave – IWDEE) &longrightarrow; <code>"SWAVE.PRO"</code></li>
                  <li>Option: <code><a href="#ExtFlags_BIT29">Limited Path Count</a></code> – Projectile terminates upon traveling originally targeted distance.</li>
                  <li>
                    Option: <code><a href="#ExtFlags_BIT0">Bounce from Walls</a></code> – Projectile rebounds off solid walls, terminating upon the 4<sup>th</sup> wall impact.
                    <ul>
                      <li>Example: (Lightning Bolt) &longrightarrow; <code>"LIGHTB.PRO"</code></li>
                    </ul>
                  </li>
                  <li>
                    Option: Spell Target(<code>Location</code>)
                    <ul>
                      <li>Option: <code><a href="#ExtFlags_BIT3">Hit Immediately</a></code> – Projectile is stationary at targeted location.</li>
                      <li>Duration: Projectile remains active for <code>15</code> loops of its <code><a href="#0x104">Projectile Animation</a></code>.</li>
                      <li>
                        Option: <code><a href="#ExtFlags_BIT7">Pillar</a></code> – Projectile displays all cycles of travel animation simultaneously, stacked vertically.
                        <ul>
                          <li>Duration: Projectile remains active for <code>1</code> cycle of its <code><a href="#0x104">Projectile Animation</a></code>.</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>
                    Option: Spell Target(<code>Creature</code>)
                    <ul>
                      <li>Option: <code><a href="#ExtFlags_BIT3">Hit Immediately</a></code> – Projectile is stationary at targeted creature's location.</li>
                      <li>Effect Radius: None</li>
                      <li>Hits only the targeted creature, once.</li>
                      <li>Projectile continues to display for <code>15</code> loops of its <code><a href="#0x104">Projectile Animation</a></code>, but has no further effect.</li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>
                Bit 2 &longrightarrow; <b><a name="ExtFlags_BIT2">Draw center VVC once</a></b>
                <ul>
                  <li>Dependency: Activated by <code><a href="#AreaFlags_BIT10">Draw Animation<a></code>.</li>
                  <li>Forces <code><a href="#0x21C">Explosion Animation</a></code> to be played only once.</li>
                  <li>Works on <a href="../ie_formats/vef_v1.htm">VEF</a>, <a href="../ie_formats/vvc_v1.htm">VVC</a>, and <a href="../ie_formats/bam_v1.htm">BAM</a> files, but <a href="../ie_formats/vef_v1.htm">VEF</a>/<a href="../ie_formats/vvc_v1.htm">VVC</a> files can manually set their duration to match the projectile duration.</li>
                </ul>
              </li>

              <li>
                Bit 3 &longrightarrow; <b><a name="ExtFlags_BIT3">Hit immediately</a></b>
                <ul>
                  <li><code><a href="#0x8">Projectile Type</a></code> must be either <code><a href="#0x8_2">Single Target</a></code> or <code><a href="#0x8_3">Area Effect</a></code>.</li>
                  <li>Travelling Projectile hits instantly, but is still displayed momentarily.</li>
                  <li>Area Effect Explosion will be slightly off center of the target('s/ed) location.</li>
                  <li>Compatibility: Suppressed by <code><a href="#ExtFlags_BIT14">Lined up AoE</a></code></li>
                  <li>Suppresses: <code><a href="#ExtFlags_BIT14">Lined up AoE</a></code></li>
                </ul>
              </li>

              <li>
                Bit 4 &longrightarrow; <b><a name="ExtFlags_BIT4">Face target</a></b>
                <ul>
                  <li>Dependency: Activated by <code><a href="#AreaFlags_BIT10">Draw Animation</a></code></li>
                  <li>
                    Allows the <code><a href="#0x21C">Explosion Animation</a></code> to be oriented in the direction of casting (the VVC and its BAM must be setup to do so as well).
                    <ul>
                      <li>This requires the <code><a href="#0x21C">Explosion Animation</a></code> to include a VVC (VEF optional), not just a BAM.</li>
                      <li>Any mirroring must be specified in the VVC.</li>
                      <li>The VVC file's <code><a href="../ie_formats/vvc_v1.htm#0x40">Travel Orientation</a></code> must use <code><a href="../ie_formats/vvc_v1.htm#0x40_BIT0">Face Target</a></code>.</li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>
                Bit 5 &longrightarrow; <b><a name="ExtFlags_BIT5">Curved path</a></b> (Unknown – still "not implemented" on EE games)
                <ul>
                  <li>Not required for the curved arc of <code><a href="#ExtFlags_BIT10">Multiple Projectile</a></code></li>
                </ul>
              </li>

              <li>Bit 6 &longrightarrow; <b><a name="ExtFlags_BIT6">Start random frame</a></b></li>

              <li>
                Bit 7 &longrightarrow; <b><a name="ExtFlags_BIT7">Pillar</a></b>
                <ul>
                  <li>All cycles of <code><a href="#0x104">Projectile Animation</a></code> are displayed simultaneously, stacked vertically.</li>
                  <li>
                    Compatibility: <code><a href="#ExtFlags_BIT13">Comet</a></code> &longrightarrow; The Traveling Projectile does not use the vertical offset of the Comet trajectory.
                    <ul>
                      <li>Any Trailing animations of the Traveling Projectile will continue to use the Comet trajectory.</li>
                    </ul>
                  </li>
                  <li>
                    <code><a href="#0x8">Projectile Type</a>: <a href="#0x8_2">Single Target</a></code>
                    <ul>
                      <li>The traveling projectile will terminate after one cycle of the animation, which may occur before reaching its target/destination.</li>
                      <li><code><a href="#ExtFlags_BIT3">Hit Immediately</a></code> is recommended to avoid this.</li>
                      <li>Suppresses: <code><a href="#ExtFlags_BIT14">Lined up AoE</a></code>, <code><a href="#0x11C">Palette</a></code>.</li>
                    </ul>
                  </li>
                  <li>
                    <code><a href="#0x8">Projectile Type</a>: <a href="#0x8_3">Area Effect</a></code>
                    <ul>
                      <li>The animation will loop until the traveling projectile reaches its target/destination.</li>
                      <li><code><a href="#0x11C">Palette</a></code> is not suppressed.</li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>Bit 8 &longrightarrow; <b><a name="ExtFlags_BIT8">Semi-transparent trail puff VEF</a></b></li>
              <li>Bit 9 &longrightarrow; <b><a name="ExtFlags_BIT9">Tinted trail puff VEF</a></b></li>

              <li>Bit 10 &longrightarrow; <b><a name="ExtFlags_BIT10">Multiple projectiles</a></b>
                <ul>
                  <li>
                    When this flag is set, the game looks at the projectile entry one number less. If that projectile also has it set, it looks at the projectile entry one number less again, until it finds a projectile without that flag set. All projectiles it finds are fired at the target.
                    <ul>
                      <li>Compatibility: Any of these projectiles using <code><a href="#ExtFlags_BIT29">Limited Path Count</a></code> may not impact if the arc and/or distance to the target is too large.</li>
                    </ul>
                  </li>
                  <li>
                    The speed of the last projectile it finds determines the overall speed of the projectile, while the speed of the specified projectile determines the "arc" (strength) of all of the projectiles.
                    <ul>
                      <li>Arc value should be between <code>0</code> and <code>90</code> for three projectiles. More projectiles should use progressively lower arc values.</li>
                      <li>Some projectiles may never impact if the arc is too big.</li>
                      <li>Negative values result in no arc.</li>
                    </ul>
                  </li>
                  <li>Certain other flags in the projectile effectively disable the <code><a href="#ExtFlags_BIT10">Multiple Projectile</a></code> flag (such as being Area-Effect or a <code><a href="#ExtFlags_BIT14">lined-up AoE</a></code> (like Agannazar's Scorcher)), and those projectiles will be treated as if the flag wasn't set.</li>
                  <li>
                    Compatibility: This feature is lost when the projectile is used as an <code><a href="#0x21A">Explosion Projectile</a></code> or a <code><a href="#0x214">Secondary Projectile</a></code>.
                    <ul>
                      <li>The hardcoded projectiles for Magic Missile (<code>68-77|<a href="../../files/ids/bgee/projectl.htm">PROJECTL.IDS</a></code>) / (<code>69-78|<a href="../../files/ids/bgee/missile.htm">MISSILE.IDS</a></code>) bypass this limitation.</li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>Bit 11 &longrightarrow; <b><a name="ExtFlags_BIT11">Default spell on missed</a></b></li>

              <li>
                Bit 12 &longrightarrow; <b><a name="ExtFlags_BIT12">Falling path</a></b>
                <ul>
                  <li>Traveling Projectile originates from target, instead of caster. (Near Instant hit)</li>
                  <li>Compatibility: Not viable with <code><a href="#ExtFlags_BIT1">Pass Target</a></code></li>
                  <li>Suppresses: <code>0x100 – 0x1FF|Traveling Projectile Animation</code></li>
                </ul>
              </li>

              <li>
                Bit 13 &longrightarrow; <b><a name="ExtFlags_BIT13">Comet</a></b>
                <ul>
                  <li>Affects: Traveling Projectile.</li>
                  <li>Projectile originates from upper-right or upper-left relative to target.</li>
                  <li>Vertical offset increased by <code><a href="#0xA">Projectile Speed</a></code>.</li>
                  <li>
                    Horizontal offset increased by <code><a href="#0x2A">Projectile Width</a></code>.
                    <ul>
                      <li>Can be positive or negative. Positive values are further right, negative values are further left.</li>
                    </ul>
                  </li>
                  <li><code><a href="#0xA">Projectile Speed</a></code> and <code><a href="#0x2A">Projectile Width</a></code> must be chosen carefully and fully tested – various combinations are prone to crashing.</li>
                  <li>
                    Compatibility:
                    <ul>
                      <li>Not usable with <code><a href="#AreaFlags_BIT11">Cone-shaped</a></code>. All other Area Flags work normally.</li>
                      <li>Not viable with <code><a href="#ExtFlags_BIT1">Pass Target</a></code></li>
                      <li>Not viable with <code><a href="#ExtFlags_BIT7">Pillar</a></code> – Projectile may terminate before reaching destination.</li>
                    </ul>
                  </li>
                  <li>Suppresses: <code><a href="#ExtFlags_BIT14">Lined up AoE</a></code></li>
                  <li>
                    Option: Spell Target(<code>Creature</code>)
                    <ul>
                      <li><code><a href="#0x8">Projectile Type</a></code> must be either <code><a href="#0x8_2">Single Target</a></code> or <code><a href="#0x8_3">Area Effect</a></code></li>
                    </ul>
                  </li>
                  <li>
                    Option: Spell Target(<code>Location</code>)
                    <ul>
                      <li><code><a href="#0x8">Projectile Type</a></code> must be <code><a href="#0x8_3">Area Effect</a></code></li>
                      <li>Example: (Comet – BG2EE) &longrightarrow; <code>"COMET.PRO"</code></li>
                    </ul>
                  </li>
                  <li>Compatibility: Spell Target(<code>Creature</code>) and Spell Target(<code>Location</code>) will calculate their flight paths differently based on (unknown) factors.</li>
                  <li>
                    Compatibility: <code><a href="#ExtFlags_BIT7">Pillar</a></code> – The Traveling Projectile will not use the vertical offset of the Comet trajectory, travelling directly horizontal.
                    <ul>
                      <li>Any Trailing animations of the Traveling Projectile will continue to use the Comet trajectory.</li>
                    </ul>
                  </li>
                  <li>Option: <code><a href="#ExtFlags_BIT12">Falling Path</a></code> – Projectile originates from opposite horizontal direction.</li>
                  <li><code><a href="#0x8">Projectile Type</a>: <a href="#0x8_3">Area Effect</a></code> – Area Effect processes as normal once Projectile reaches its target destination.</li>
                </ul>
              </li>

              <li>
                Bit 14 &longrightarrow; <b><a name="ExtFlags_BIT14">Lined up area of effect</a></b>
                <ul>
                  <li>A line of Traveling Projectiles extends between the caster and the target, lasting one round.</li>
                  <li>
                    <code><a href="#0x2A">Projectile Width</a></code> does NOT control the width of the line.
                    <ul>
                      <li>The line's effect is <code>52</code> pixels wide (when directly horizontal), or <code>40</code> pixels wide (when directly vertical).</li>
                    </ul>
                  </li>
                  <li>
                    The target is hit immediately, and again <code>4</code> seconds (<code>60</code> ticks) later.
                    <ul>
                      <li>Effects with <code><a href="../ie_formats/eff_v1.htm#effv1_Header_BIT10">Ignore Primary Target</a></code> will not affect the target (EE only).</li>
                    </ul>
                  </li>
                  <li>
                    Any creature in or entering the line between the caster and the target is hit immediately.
                    <ul>
                      <li>They are hit again if they are still in or reenter the line between the target and caster at least <code>3</code> seconds later before the projectile ends.</li>
                      <li>Effects with <code><a href="../ie_formats/eff_v1.htm#effv1_Header_0x24_BIT11">Ignore Secondary Target</a></code> will not affect these creatures (EE only).</li>
                    </ul>
                  </li>
                  <li>The Traveling Projectile will reposition itself to maintain a line between the caster and target as either of them moves around.</li>
                  <li>The caster is locked into facing the target for the duration, adjusting as either moves around.</li>
                  <li>
                    <code><a href="#0xA">Speed</a></code> controls the number of Traveling Projectiles that are displayed between the caster and target. It still must be non-zero to avoid crashing.
                    <ul>
                      <li>Value represents the distance (pixels) between each animation's center point.</li>
                    </ul>
                  </li>
                  <li>
                    Spell Target: <code>Creature/Object</code>
                    <ul>
                      <li>
                        Compatibility: <code><a href="#Behavior_BIT1">Use Height</a></code>
                        <ul>
                          <li>
                            This projectile will gradually lose its height value until it is at ground level (aesthetic/cosmetic only).
                            <ul>
                              <li>This decline is one pixel per instance of the animation displayed between the caster and target.</li>
                            </ul>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>
                    Spell Target: <code>Location</code>
                    <ul>
                      <li>
                        Compatibility: <code><a href="#Behavior_BIT1">Use Height</a></code>
                        <ul>
                          <li>This projectile will remain at the caster's height.</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>If Main Projectile targets a location, this projectile will maintain its height value.</li>
                  <li><code><a href="#0x8">Projectile Type</a>: <a href="#0x8_2">Single Target</a></code></li>
                  <li>Priority: Suppressed by <code><a href="#ExtFlags_BIT7">Pillar</a></code> or <code><a href="#ExtFlags_BIT10">Multiple Projectile</a></code></li>
                  <li>Suppresses: <code><a href="#ExtFlags_BIT1">Pass Target</a></code>, <code><a href="#ExtFlags_BIT3">Hit Immediately</a></code>, <code><a href="#ExtFlags_BIT21">Random Path</a></code>, <code><a href="#0x11C">Palette</a></code>.</li>
                  <li>Compatibility: Such a projectile will NOT function as the <code><a href="#0x21A">Explosion Projectile</a></code> of another projectile.</li>
                  <li>
                    Compatibility: when used as the <code><a href="#0x214">Secondary Projectile</a></code> of another projectile:
                    <ul>
                      <li>
                        If that projectile does NOT use <code><a href="#ExtFlags_BIT0">Bounce from Walls</a></code>:
                        <ul>
                          <li>This projectile will ignore the target's animation height, traveling to their ground location instead of their casting height.</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>Example: (Aganazzar's Scorcher) &longrightarrow; <code>"SCORCHER.PRO"</code></li>
                  <li>Option: <code><a href="#ExtFlags_BIT12">Falling Path</a></code> and/or <code><a href="#ExtFlags_BIT13">Comet</a></code> – Suppresses <code>0x100 – 0x1ff|Traveling Projectile Animation</code></li>
                  <li>
                    Option: <code><a href="#ExtFlags_BIT29">Limited Path Count</a></code> – Does not hit any target a second time. Projectile terminates after one second.
                    <ul>
                      <li>
                        Example: (Wand of Frost – BGEE only) – hardcoded projectile: (190|<a href="../../files/ids/bgee/projectl.htm">PROJECTL.IDS</a>) / (191|<a href="../../files/ids/bgee/missile.htm">MISSILE.IDS</a>)
                        <ul>
                          <li>Exception: this projectile is further hardcoded for all its effects to only affect the initial target, not those in-between.</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>
                Bit 15 &longrightarrow; <b><a name="ExtFlags_BIT15">Rectangular area of effect</a></b>
                <ul>
                  <li>
                    Affects target(s) in range every tick for its duration. Total number of target checks:
                    <ul>
                      <li>
                        <code>If <a href="#0x216"># Repetitions</a> < 2</code>:
                        <ul>
                          <li><code>If <a href="#AreaFlags_BIT14">Skip First Condition</a>: <a href="#0x210">Explosion Frequency</a> + 1</code></li>
                          <li><code>Else: 1</code></li>
                        </ul>
                      </li>
                      <li>
                        <code>If <a href="#0x216"># Repetitions</a> > 1</code>:
                        <ul>
                          <li><code>If <a href="#AreaFlags_BIT14">Skip First Condition</a>: (<a href="#0x210">Explosion Frequency</a> + 1) * (<a href="#0x216"># Repetitions</a>)</code></li>
                          <li><code>Else: (<a href="#0x210">Explosion Frequency</a> + 1) * (<a href="#0x216"># Repetitions</a> - 1) + 1</code></li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>
                    Option: <code><a href="#AreaFlags_BIT3">Delayed Trigger</a></code> – Affects targets(s) in range <code><a href="#0x216"># Repetitions</a></code> times, checked every <code><a href="#0x210">Explosion Frequency</a></code> ticks.
                    <ul>
                      <li>This makes it trigger more similarly to regular repeating Area Effect projectiles.</li>
                    </ul>
                  </li>
                  <li>Area effect: <code><a href="#0x204">Trap Size</a> = Parallel Length</code>, <code><a href="#0x206">Explosion Size</a> = Perpendicular Length</code></li>
                  <li>Oriented in the direction of casting from the caster.</li>
                  <li><code><a href="#0x217">Explosion Effect</a></code> still plays as normal, but no longer represents affected area.</li>
                  <li>
                    <code><a href="#0x21C">Explosion Animation</a></code> must be used to represent the affected area.
                    <ul>
                      <li>The animation must be made to match the intended dimensions – it will not be stretched/tiled to fill the area.</li>
                      <li>
                        The following flags are recommended:
                        <ul>
                          <li>
                            <code><a href="#AreaFlags_BIT10">Draw Animation</a></code> – Required for <a href="#ExtFlags_BIT4">Face Target</a> to work.
                            <ul>
                              <li>Causes a new instance of <code><a href="#0x21C">Explosion Animation</a></code> to be played every frame, stacking to become a indiscernible blob.</li>
                            </ul>
                          </li>
                          <li>
                            <code><a href="#ExtFlags_BIT4">Face Target</a></code> – orients <a href="#0x21C">Explosion Animation</a> based on casting direction.
                            <ul>
                              <li><code>If <a href="#0x204">Trap Size</a> > <a href="#0x206">Explosion Size</a></code>, first animation cycle should be vertical.</li>
                              <li><code>If <a href="#0x204">Trap Size</a> < <a href="#0x206">Explosion Size</a></code>, first animation cycle should be horizontal.</li>
                            </ul>
                          </li>
                          <li>
                            <code><a href="#ExtFlags_BIT2">Draw center VVC once</a></code> – Single instance of <code><a href="#0x21C">Explosion Animation</a></code> is looped over the duration.
                            <ul>
                              <li>Removes the animation blob created by <code><a href="#ExtFlags_BIT10">Draw Animation</a></code>.</li>
                            </ul>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>Priority: Suppressed by <code><a href="#ExtFlags_BIT1">Pass Target</a></code></li>
                  <li>
                    Suppresses:
                    <ul>
                      <li><code><a href="#ExtFlags_BIT14">Lined up AoE</a></code></li>
                      <li><code><a href="#AreaFlags_BIT2">Triggered by Condition</a></code></li>
                      <li><code><a href="#0x202">Ray Count</a></code></li>
                    </ul>
                  </li>
                  <li>Example: (Wall of Moonlight – IWDEE) &longrightarrow; <code>"WOMOON.PRO"</code></li>
                </ul>
              </li>

              <li>Bit 16 &longrightarrow; <b><a name="ExtFlags_BIT16">Draw behind target</a></b></li>

              <li>
                Bit 17 &longrightarrow; <b><a name="ExtFlags_BIT17">Casting glow effect</a></b>
                <ul>
                  <li><code><a href="#0x104">Projectile Animation</a></code> plays first 3 cycles/sequences in order. (Mirrored as normal)</li>
                  <li>
                    Designed for use with <a href="../../opcodes/bgee.htm#op140">opcode #140</a>, combined with <code><a href="#ExtFlags_BIT3">Hit Immediately</a></code>.
                    <ul>
                      <li>The 1<sup><small>st</small></sup> cycle/sequence is played once.</li>
                      <li>The 2<sup><small>nd</small></sup> cylce/sequence is looped (or cut short) until there is only enough time left to play the 3<sup><small>rd</small></sup> cycle/sequence once.</li>
                      <li>The 3<sup><small>rd</small></sup> cycle/sequence is then played once.</li>
                    </ul>
                  </li>
                  <li>Also used by the various spell–school <a href="../ie_formats/spl_v1.htm#Header_Casting_Graphics">casting animations</a> for spells.</li>
                </ul>
              </li>

              <li>Bit 18 &longrightarrow; <b><a name="ExtFlags_BIT18">Travel door</a></b></li>
              <li>Bit 19 &longrightarrow; <b><a name="ExtFlags_BIT19">Stop/fade after hit</a></b></li>

              <li>
                Bit 20 &longrightarrow; <b><a name="ExtFlags_BIT20">Display message</a></b>
                <ul>
                  <li>Activates: <code><a href="#0x30">String</a></code></li>
                  <li>
                    <code>String</code> is displayed (by caster) twice: once when spell is selected for targeting, and again when spell is successfully cast.
                    <ul>
                      <li>Selecting a spell for a quick-spell slot also generates the message because this also selects the spell for targeting.</li>
                    </ul>
                  </li>
                  <li>Spells with <a href="../ie_formats/spl_v1.htm#splv1_Extended_Header">Ability Target</a> <code>5|Caster</code> do not trigger a targeting message, as they begin casting immediately when selected.</li>
                </ul>
              </li>

              <li>
                Bit 21 &longrightarrow; <b><a name="ExtFlags_BIT21">Random path</a></b>
                <ul>
                  <li>Traveling Projectile stutters towards the intended target, moving in random directions as it moves.</li>
                  <li>Priority: Suppressed by <code><a href="#ExtFlags_BIT1">Pass Target</a></code> and/or <code><a href="#ExtFlags_BIT14">Lined up AoE</a></code></li>
                  <li>
                    <code><a href="#0x8">Projectile Type</a>: <a href="#0x8_2">Single Target</a></code>
                    <ul>
                      <li>Compatibility: <code><a href="#ExtFlags_BIT7">Pillar</a></code> can cause the projectile to never impact its target</li>
                      <li>
                        Compatibility: <code><a href="#ExtFlags_BIT10">Multiple projectile</a></code> will both arc and stutter.
                        <ul>
                          <li>Arc strength and Speed must be carefully chosen to avoid projectiles flying out to nowhere.</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>Bit 22 &longrightarrow; <b><a name="ExtFlags_BIT22">Start random sequence</a></b></li>

              <li>
                Bit 23 &longrightarrow; <b><a name="ExtFlags_BIT23">Colour pulse on hit</a></b>
                <ul>
                  <li>Activates: <code><a href="#0x34">Pulse Color</a></code> and <code><a href="#0x38">Color Pulse Speed</a></code>.</li>
                  <li><code><a href="#0x8">Projectile Type</a></code> must be <code><a href="#0x8_2">Single Target</a></code>.</li>
                  <li>Target pulses the specified color.</li>
                  <li>Compatibility: Does not work with <code><a href="#ExtFlags_BIT1">Pass Target</a></code> or <code><a href="#ExtFlags_BIT14">Lined up AoE</a></code>.</li>
                </ul>
              </li>

              <li>Bit 24 &longrightarrow; <b><a name="ExtFlags_BIT24">Touch projectile</a></b></li>

              <li>
                Bit 25 &longrightarrow; <b><a name="ExtFlags_BIT25">Negate first creature target</a></b>
                <ul>
                  <li>See <code><a href="#ExtFlags_BIT30">IWD style check</a></code>.</li>
                </ul>
              </li>

              <li>
                Bit 26 &longrightarrow; <b><a name="ExtFlags_BIT26">Negate second creature target</a></b>
                <ul>
                  <li>See <code><a href="#ExtFlags_BIT30">IWD style check</a></code>.</li>
                </ul>
              </li>

              <li>
                Bit 27 &longrightarrow; <b><a name="ExtFlags_BIT27">Use either IDS</a></b>
                <ul>
                  <li>See <code><a href="#ExtFlags_BIT30">IWD style check</a></code>.</li>
                </ul>
              </li>

              <li>Bit 28 &longrightarrow; <b><a name="ExtFlags_BIT28">Delayed payload</a></b></li>

              <li>
                Bit 29 &longrightarrow; <b><a name="ExtFlags_BIT29">Limited path count</a></b>
                <ul>
                  <li>
                    Traveling Projectile terminates after it has traveled for its originally calculated duration/distance (based on the targeted location), regardless of whether it has impacted its target or not.
                    <ul>
                      <li>For homing projectiles, this allows the target to "dodge" the projectile, by moving a bit in any direction (except directly towards the caster) before impact.</li>
                      <li>Generally any distance that causes the projectile to "turn" or go beyond its original distance is enough to "dodge" it.</li>
                    </ul>
                  </li>
                  <li>Compatibility: This behavior works the same with <code><a href="#ExtFlags_BIT1">Pass Target</a></code>, with or without <code><a href="#ExtFlags_BIT0">Bounce from Walls</a></code>.</li>
                  <li>Compatibility: Projectile's arced by <code><a href="#ExtFlags_BIT10">Multiple Projectile</a></code> have a higher chance to terminate before impacting the target as the arc distance increases.</li>
                  <li>
                    Compatibility: Projectile's using <code><a href="#ExtFlags_BIT14">Lined up AoE</a></code> functions differently:
                    <ul>
                      <li>The projectile is limited to lasting only 1–2 seconds, preventing it from affecting any target a second time.</li>
                    </ul>
                  </li>
                  <li>Special: All "VEF" projectiles (anything listed in <code><a href="../../files/ids/bgee/vefproj.htm">VEFPROJ.IDS</a></code>) effectively use this flag.</li>
                </ul>
              </li>

              <li>Bit 30 &longrightarrow; <b><a name="ExtFlags_BIT30">IWD style check</a></b> (use entries from <a href="../../files/2da/2da_bgee/splprot.htm">SPLPROT.2DA</a> for first and second creature target). It works similar to op<a href="../../opcodes/bgee.htm#op318">318</a>/<a href="../../opcodes/bgee.htm#op326">326</a>, depending on the other related flags:
                <ul>
                  <li><code><a href="#0x8">Projectile Type</a></code> must be <code><a href="#0x8_3">Area Effect</a></code>.</li>
                  <li>Activates: <code><a href="#0x3C">Creature value 1</a></code>, <code><a href="#0x3E">Creature type 1</a></code>, <code><a href="#0x40">Creature value 2</a></code>, <code><a href="#0x42">Creature type 2</a></code>.</li>
                  <li>Activates: <code><a href="#ExtFlags_BIT25">Neg. IDS1</a></code>, <code><a href="#ExtFlags_BIT26">Neg. IDS2</a></code>, <code><a href="#ExtFlags_BIT27">Use either IDS</a></code>.</li>
                  <li>
                    Projectile excludes creatures as valid targets for its Area Effect if:
                    <ul>
                      <li>Default: Exclude objects matching <code><a href="#0x3E">Creature type 1</a></code> and matching <code><a href="#0x42">Creature type 2</a></code></li>
                      <li><code><a href="#ExtFlags_BIT27">Use either IDS</a></code>: Exclude objects matching <code><a href="#0x3E">Creature type 1</a></code> or matching <code><a href="#0x42">Creature type 2</a></code></li>
                      <li><code><a href="#ExtFlags_BIT25">Neg. IDS1</a></code>: Exclude objects not matching <code><a href="#0x3E">Creature type 1</a></code> and matching <code><a href="#0x42">Creature type 2</a></code></li>
                      <li><code><a href="#ExtFlags_BIT26">Neg. IDS2</a></code>: Exclude objects matching <code><a href="#0x3E">Creature type 1</a></code> and not matching <code><a href="#0x42">Creature type 2</a></code></li>
                      <li><code><a href="#ExtFlags_BIT25">Neg. IDS1</a> + <a href="#ExtFlags_BIT27">Use either IDS</a></code>: Exclude objects not matching <code><a href="#0x3E">Creature type 1</a></code> and matching <code><a href="#0x42">Creature type 2</a></code></li>
                      <li><code><a href="#ExtFlags_BIT26">Neg. IDS2</a> + <a href="#ExtFlags_BIT27">Use either IDS</a></code>: Exclude objects matching <code><a href="#0x3E">Creature type 1</a></code> and not matching <code><a href="#0x42">Creature type 2</a></code></li>
                      <li><code><a href="#ExtFlags_BIT25">Neg. IDS1</a> + <a href="#ExtFlags_BIT26">Neg. IDS2</a></code>: Exclude objects matching <code><a href="#0x3E">Creature type 1</a></code> or matching <code><a href="#0x42">Creature type 2</a></code></li>
                      <li><code><a href="#ExtFlags_BIT25">Neg. IDS1</a> + <a href="#ExtFlags_BIT26">Neg. IDS2</a> + <a href="#ExtFlags_BIT27">Use either IDS</a></code>: Exclude objects matching <code><a href="#0x3E">Creature type 1</a></code> and matching <code><a href="#0x42">Creature type 2</a></code></li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>Bit 31 &longrightarrow; <b><a name="ExtFlags_BIT31">Caster affected</a></b> – This is related to effect target <code><a href="../ie_formats/eff_v1.htm#effv1_Header_0x2_9">Original Caster</a></code>.
                <ul>
                  <li>If this flag is set, the original caster is affected once for every target.</li>
                  <li>Without this flag, the original caster is affected only once, but only if there is at least one target.</li>
                  <li>
                    This flag should only be set on <code><a href="#0x8_3">Area-Effect</a></code> projectiles.
                    <ul>
                      <li><code><a href="#0x8_2">Single-target</a></code> projectiles, even those that hit multiple targets (f.i. Lightning Bolt), will trigger <code>Original Caster</code> effects once for every target by default.</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </td>
        </tr>

        <tr>
          <td>0x00030</td>
          <td>4 (strref)</td>
          <td>
            <b><a name="0x30">Displayed Message</a></b>
            <ul>
              <li>Dependency: Activated by <code><a href="#ExtFlags_BIT20">Display String</a></code>.</li>
              <li>String is displayed (by caster) twice: once when spell is selected for targeting, and again when spell is successfully cast.</li>
            </ul>
          </td>
        </tr>

        <tr>
          <td>0x00034</td>
          <td>4 (dword)</td>
          <td>
            <b><a name="0x34">Pulse Color</a></b>
            <ul>
              <li>Dependency: Activated by <code><a href="#ExtFlags_BIT23">Color Pulse on hit</a></code>.</li>
              <li>
                Target pulses the specified color.
                <ul>
                  <li>Compatibility: Only works with <code><a href="#0x8">Projectile Type</a> – <a href="#0x8_2">Single Target</a></code>, but not with <code><a href="#ExtFlags_BIT1">Pass Target</a></code> or <code><a href="#ExtFlags_BIT14">Lined up AoE</a></code>.</li>
                </ul>
              </li>
              <li>Color Value: <code>0x34|Red</code> – <code>0x35|Green</code> – <code>0x36|Blue</code> – <code>0x37|Alpha</code>, though <code>Alpha</code> is not used.</li>
            </ul>
          </td>
        </tr>

        <tr>
          <td>0x00038</td>
          <td>2 (word)</td>
          <td>
            <b><a name="0x38">Color speed</a></b>
            <ul>
              <li>Dependency: Activated by <code><a href="#ExtFlags_BIT23">Color Pulse on hit</a></code>.</li>
              <li>Speed (in ticks) of Color Pulse (fades to color, then fades out, entire process takes twice as long as listed value).</li>
            </ul>
          </td>
        </tr>

        <tr>
          <td>0x0003a</td>
          <td>2 (word)</td>
          <td>
            <b><a name="0x3A">Screen shake amount</a></b>
            <ul>
              <li>Value identical to <a href="../../opcodes/bgee.htm#op269">opcode #269</a>.</li>
              <li>Screen shake occurs when Traveling Projectile reaches its target.</li>
            </ul>
          </td>
        </tr>

        <tr>
          <td>0x0003c</td>
          <td>2 (word)</td>
          <td>
            <b><a name="0x3C">Creature Value 1</a></b>
            <ul>
              <li>Requires <code><a href="#ExtFlags_BIT30">IWD style check</a></code>.</li>
              <li>When <code><a href="#ExtFlags_BIT30">IWD style check</a></code> is unset, it's unclear if IDS files work...</li>
            </ul>
          </td>
        </tr>

        <tr>
          <td>0x0003e</td>
          <td>2 (word)</td>
          <td>
            <b><a name="0x3E">Creature Type 1</a></b>
            <ul>
              <li>Requires <code><a href="#ExtFlags_BIT30">IWD style check</a></code>.</li>
              <li>When <code><a href="#ExtFlags_BIT30">IWD style check</a></code> is unset, it's unclear if IDS files work...</li>
            </ul>
          </td>
        </tr>

        <tr>
          <td>0x00040</td>
          <td>2 (word)</td>
          <td>
            <b><a name="0x40">Creature Value 2</a></b>
            <ul>
              <li>Requires <code><a href="#ExtFlags_BIT30">IWD style check</a></code>.</li>
              <li>When <code><a href="#ExtFlags_BIT30">IWD style check</a></code> is unset, it's unclear if IDS files work...</li>
            </ul>
          </td>
        </tr>

        <tr>
          <td>0x00042</td>
          <td>2 (word)</td>
          <td>
            <b><a name="0x42">Creature Type 2</a></b>
            <ul>
              <li>Requires <code><a href="#ExtFlags_BIT30">IWD style check</a></code>.</li>
              <li>When <code><a href="#ExtFlags_BIT30">IWD style check</a></code> is unset, it's unclear if IDS files work...</li>
            </ul>
          </td>
        </tr>

        <tr>
          <td>0x00044</td>
          <td>8 (resref)</td>
          <td>Default spell (<a href="spl_v1.htm">SPL</a>)</td>
        </tr>
        <tr>
          <td>0x0004c</td>
          <td>8 (resref)</td>
          <td>Success spell (<a href="spl_v1.htm">SPL</a>)</td>
        </tr>
        <tr>
          <td>0x00054</td>
          <td>2 (word)</td>
          <td>Angle increase minimum [PSTEE]</td>
        </tr>
        <tr>
          <td>0x00056</td>
          <td>2 (word)</td>
          <td>Angle increase maximum [PSTEE]</td>
        </tr>
        <tr>
          <td>0x00058</td>
          <td>2 (word)</td>
          <td>Curve minimum [PSTEE]</td>
        </tr>
        <tr>
          <td>0x0005a</td>
          <td>2 (word)</td>
          <td>Curve maximum [PSTEE]</td>
        </tr>
        <tr>
          <td>0x0005c</td>
          <td>2 (word)</td>
          <td>THAC0 bonus [PSTEE]</td>
        </tr>
        <tr>
          <td>0x0005e</td>
          <td>2 (word)</td>
          <td>THAC0 bonus (non-actor) [PSTEE]</td>
        </tr>
        <tr>
          <td>0x00060</td>
          <td>2 (word)</td>
          <td>Radius minimum [PSTEE]</td>
        </tr>
        <tr>
          <td>0x00062</td>
          <td>2 (word)</td>
          <td>Radius maximum [PSTEE]</td>
        </tr>
        <tr>
          <td>0x00064</td>
          <td>156 (bytes)</td>
          <td>Unused</td>
        </tr>
      </tbody>
    </table>
    <br />

    The following struct is added when the projectile is a single target or area effect projectile (see <code><a href="#0x8">Projectile Type</a></code>). It has <code>100h</code> (<code>256</code>) bytes.<br />
    <br />
    <table border="1" width="98%">
      <colgroup>
        <col width="5%" />
        <col width="12%" />
         <col width="*" />
      </colgroup>
      <thead>
        <tr>
          <th>Offset</th>
          <th>Size (datatype)</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>0x00100</td>
          <td>4 (dword)</td>
          <td>BAM projectile flags
            <ul>
              <li>
                bit 0 &longrightarrow; <b><a name="Flags_BIT0">Enable BAM colouring</a></b> (palette at <code><a href="#0x11C">0x11c</a></code>)
                <ul>
                  <li>Activates "Projectile Color" fields (<code>0x11c – 0x12a</code>)</li>
                </ul>
              </li>

              <li>
                bit 1 &longrightarrow; <b><a name="Flags_BIT1">Enable smoke</a></b>
                <ul>
                  <li>Activates <code><a href="#0x12B">Smoke Puff Delay</a></code></li>
                </ul>
              </li>

              <li>
                bit 2 &longrightarrow; <b><a name="Flags_BIT2">Colored smoke</a></b>
                <ul>
                  <li>
                    Activates "Smoke Puff Color" fields (<code>0x12c – 0x132</code>)
                    <ul>
                      <li>The <code><a href="#0x134">Smoke Animation</a></code> must support (<code>false_color=1</code>) recoloring for these fields to do anything.</li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>
                bit 3 &longrightarrow; <b><a name="Flags_BIT3">Enable area lighting usage / Not light source</a></b>
                <ul>
                  <li>Darkens <a href="#0x104">Projectile Animation</a></li>
                </ul>
              </li>

              <li>bit 4 &longrightarrow; <b><a name="Flags_BIT4">Enable area height usage</a></b></li>

              <li>
                bit 5 &longrightarrow; <b><a name="Flags_BIT5">Enable shadow</a></b>
                <ul>
                  <li>Activates <code><a href="#0x10C">Shadow Animation</a></code></li>
                </ul>
              </li>

              <li>
                bit 6 &longrightarrow; <b><a name="Flags_BIT6">Enable light spot</a></b>
                <ul>
                  <li>Activates "Light Spot" fields (<code>0x116 – 0x11b</code>)</li>
                  <li>
                    Compatibility: This lighting does not use the vertical offset of the Traveling projectile when using <code><a href="#ExtFlags_BIT13">Comet</a></code>.
                    <ul>
                      <li>It travels directly horizontal at the target's vertical location.</li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>
                bit 7 &longrightarrow; <b><a name="Flags_BIT7">Enable brighten flags</a></b>
                <ul>
                  <li>Alters the appearance of the <code><a href="#0x104">Projectile Animation</a></code> and <code><a href="#0x10C">Shadow Animation</a></code>.</li>
                </ul>
              </li>

              <li>
                bit 8 &longrightarrow; <b><a name="Flags_BIT8">Low level brighten</a></b>
                <ul>
                  <li>Alters the appearance of the <code><a href="#0x104">Projectile Animation</a></code> and <code><a href="#0x10C">Shadow Animation</a></code>.</li>
                </ul>
              </li>

              <li>
                bit 9 &longrightarrow; <b><a name="Flags_BIT9">High level brighten</a></b>
                <ul>
                  <li>Alters the appearance of the <code><a href="#0x104">Projectile Animation</a></code> and <code><a href="#0x10C">Shadow Animation</a></code>.</li>
                </ul>
              </li>
            </ul>
          </td>
        </tr>

        <tr>
          <td>0x00104</td>
          <td>8 (resref)</td>
          <td><b><a name="0x104">Traveling Projectile Animation</a></b> (<a href="bam_v1.htm">BAM</a>)</td>
        </tr>

        <tr>
          <td>0x0010c</td>
          <td>8 (resref)</td>
          <td>
            <b><a name="0x10C">Shadow Animation</a></b> (<a href="bam_v1.htm">BAM</a>)
            <ul>
              <li>Not affected by <code><a href="#Behavior_BIT1">Use Height</a></code>.</li>
              <li>This animation cannot be oriented.</li>
              <li>Compatibility: Suppressed by <code><a href="#ExtFlags_BIT14">Lined up AoE</a></code>.</li>
              <li>
                Compatibility: This animation does not use the vertical offset of the Traveling projectile when using <code><a href="#ExtFlags_BIT13">Comet</a></code>.
                <ul>
                  <li>It travels directly horizontal at the target's vertical location.</li>
                </ul>
              </li>
            </ul>
          </td>
        </tr>

        <tr>
          <td>0x00114</td>
          <td>1 (byte)</td>
          <td>
            <b><a name="0x114">Projectile number</a></b> (BAM sequence)
            <ul>
              <li><code><a href="#0x104">Projectile Animation</a></code> uses specified Cycle/Sequence of BAM file.</li>
              <li>Defaults to <code>0</code> if value exceeds number of Cycles/Sequences in BAM file.</li>
            </ul>
          </td>
        </tr>

        <tr>
          <td>0x00115</td>
          <td>1 (byte)</td>
          <td>
            <b><a name="0x115">Shadow number</a></b> (BAM sequence)
            <ul>
              <li><code><a href="#0x10C">Projectile Animation Shadow</a></code> uses specified Cycle/Sequence of BAM file.</li>
              <li>Defaults to <code>0</code> if value exceeds number of Cycles/Sequences in BAM file.</li>
            </ul>
          </td>
        </tr>

        <tr>
          <td>0x00116</td>
          <td>2 (word)</td>
          <td>Light spot intensity</td>
        </tr>
        <tr>
          <td>0x00118</td>
          <td>2 (word)</td>
          <td>Light spot width</td>
        </tr>
        <tr>
          <td>0x0011a</td>
          <td>2 (word)</td>
          <td>Light spot height</td>
        </tr>
        <tr>
          <td>0x0011c</td>
          <td>8 (resref)</td>
          <td><b><a name="0x11C">Palette</a></b> (<a href="bmp.htm">BMP</a>)
            <ul>
              <li>STTRAVL1 = Blue</li>
              <li>STTRAVL2 = Yellow</li>
              <li>STTRAVL3 = Green</li>
              <li>STTRAVL4 = Purple</li>
              <li>STTRAVL5 = Pale purple</li>
              <li>STTRAVL6 = Pink</li>
              <li>STTRAVL7 = Blue</li>
              <li>STTRAVL8 = Gold</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>0x00124</td>
          <td>7 (bytes)</td>
          <td>Projectile colours</td>
        </tr>
        <tr>
          <td>0x0012b</td>
          <td>1 (byte)</td>
          <td><b><a name="0x12B">Smoke Puff Delay</a></b></td>
        </tr>
        <tr>
          <td>0x0012c</td>
          <td>7 (bytes)</td>
          <td>Smoke colours</td>
        </tr>

        <tr>
          <td>0x00133</td>
          <td>1 (byte)</td>
          <td>Face target granularity / "Projectile Animation" Mirroring
            <ul>
              <li>0 &longrightarrow; Do not mirror</li>
              <li>1 &longrightarrow; Do not face target (Do not mirror)</li>
              <li>
                5 &longrightarrow; Mirrored eastern directions (reduced granularity)
                <ul>
                  <li>First 5 Cycles are Mirrored (Horizontally and/or Vertically) to reach 16 directions.</li>
                </ul>
              </li>
              <li>
                9 &longrightarrow; Mirrored eastern (full granularity)
                <ul>
                  <li>First 9 Cycles are Mirrored Horizontally to reach 16 directions.</li>
                </ul>
              </li>
              <li>
                16 &longrightarrow; Not mirrored, not reduced (Do not mirror)
                <ul>
                  <li>Animation contains all 16 directions.</li>
                </ul>
              </li>
            </ul>
          </div>
          </td>
        </tr>

        <tr>
          <td>0x00134</td>
          <td>2 (short)</td>
          <td>
            <b><a name="0x134">Projectile smoke animation</a></b> (<a href="../../files/ids/bgee/animate.htm">ANIMATE.IDS</a>)
            <ul>
              <li>Compatibility: Suppressed by <code><a href="#ExtFlags_BIT14">Lined up AoE</a></code>.</li>
              <li>Compatibility: This animation follows the projectile's path when using <code><a href="#ExtFlags_BIT13">Comet</a></code>.</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>0x00136</td>
          <td>8 (resref)</td>
          <td>Trailing animation 1 (BAM)</td>
        </tr>
        <tr>
          <td>0x0013e</td>
          <td>8 (resref)</td>
          <td>Trailing animation 2 (BAM)</td>
        </tr>
        <tr>
          <td>0x00146</td>
          <td>8 (resref)</td>
          <td>Trailing animation 3 (BAM)</td>
        </tr>
        <tr>
          <td>0x0014e</td>
          <td>2 (word)</td>
          <td>Trailing number 1 (BAM sequence)</td>
        </tr>
        <tr>
          <td>0x00150</td>
          <td>2 (word)</td>
          <td>Trailing number 2 (BAM sequence)</td>
        </tr>
        <tr>
          <td>0x00152</td>
          <td>2 (word)</td>
          <td>Trailing number 3 (BAM sequence)</td>
        </tr>
        <tr>
          <td>0x00154</td>
          <td>4 (dword)</td>
          <td>Flags
            <ul>
              <li>bit 0 &longrightarrow; Puff at target</li>
              <li>bit 1 &longrightarrow; Puff at source</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>0x00158</td>
          <td>168 (bytes)</td>
          <td>Unused</td>
        </tr>
      </tbody>
    </table>
    <br />

    If the projectile is an area effect projectile then an additional struct is added to the file. It has <code>100h</code> (<code>256</code>) bytes.<br />
    <br />
    <table border="1" width="98%">
      <colgroup>
        <col width="5%" />
        <col width="12%" />
         <col width="*" />
      </colgroup>
      <thead>
        <tr>
          <th>Offset</th>
          <th>Size (datatype)</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
      <tr>
        <td>0x00200</td>
        <td>4 (dword)</td>
        <td>Area projectile flags
          <ul>
            <li>bit 0 &longrightarrow; <b><a name="AreaFlags_BIT0">Trap Visible</a></b>
              <ul>
                <li>
                  <code><a href="#0x104">Projectile Animation</a></code> plays once where it explodes.
                  <ul>
                    <li>Option: <code><a href="#AreaFlags_BIT2">Triggered by Condition</a></code> – animation loops until the trap expends its triggers.</li>
                    <li>Option: <code>If <a href="#0x216"># Repetitions</a> > 1</code>, animation loops until the Area Effect expires.</li>
                    <li>Compatibility: Any flag that suppresses <code>0x100–0x1ff|Traveling Projectile Animation</code> will also suppress this animation.</li>
                    <li>Compatibility: This animation ignores <code><a href="#ExtFlags_BIT7">Pillar</a></code>.</li>
                    <li>
                      Compatibility: When used with <code><a href="#AreaFlags_BIT13">Delayed Explosion</a></code>:
                      <ul>
                        <li>The projectile will not explode until the 30<sup>th</sup> frame of the animation created by <code><a href="#AreaFlags_BIT0">Trap Visible</a></code>.</li>
                        <li>The <code><a href="#0x210">Explosion Frequency</a></code> is delayed until that time, after which it will explode as normal until the animation ends.</li>
                        <li>The animation will then start over, <code><a href="#0x210">Explosion Frequency</a></code> will reset, and again be delayed until frame 30 of the animation.</li>
                        <li>
                          This delay applies even to explosions that are not controlled by the <code><a href="#0x210">Explosion Frequency</a></code>:
                          <ul>
                            <li>Such as when using <code><a href="#ExtFlags_BIT15">Rectangular AoE</a></code> or when the target is in-between the <code><a href="#0x204">Trap Size</a></code> and <code><a href="#0x206">Explosion Size</a></code>.</li>
                          </ul>
                        </li>
                        <li>
                          This requires the <code><a href="#0x104">Projectile Animation</a></code> to have at least 30 frames – This is the animation used by <code><a href="#AreaFlags_BIT0">Trap Visible</a></code>.
                          <ul>
                            <li>Otherwise the projectile will never explode (but still disable saving as an active <code><a href="#0x8_3">Area Effect</a></code> projectile).</li>
                          </ul>
                        </li>
                        <li>It is very likely that the 30<sup>th</sup> frame is a hardcoded value and cannot be changed.</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>

            <li>
              bit 1 &longrightarrow; <b><a name="AreaFlags_BIT1">Triggered by inanimate objects</a></b>
              <ul>
                <li><a href="../ie_formats/are_v1.htm#formAREAV1_0_Container">Containers</a> and <a href="../ie_formats/are_v1.htm#formAREAV1_0_Info_0x20">Area Triggers</a> (Proximity/Info/Travel) within range are (also) valid targets.</li>
              </ul>
            </li>

            <li>
              bit 2 &longrightarrow; <b><a name="AreaFlags_BIT2">Triggered by Condition</a></b>
              <ul>
                <li>
                  Projectile is a "Trap":
                  <ul>
                    <li>It will only explode if a valid target is within its <code><a href="#0x204">Trap Size</a></code> and its <code><a href="#0x206">Explosion Size</a></code>.</li>
                    <li>It will explode a number of times equal to <code><a href="#0x216"># Repetitions</a></code>.</li>
                    <li>It will check for targets instantly and every <code><a href="#0x210">Explosion Frequency</a></code> ticks.</li>
                    <li>
                      Option: <code><a href="#AreaFlags_BIT3">Delayed Trigger</a></code>
                      <ul>
                        <li>Subsequent checks will only explode after two sequential checks are passed.</li>
                      </ul>
                    </li>
                    <li>
                      Option: <code><a href="#AreaFlags_BIT11">Cone-shaped</a></code> – Does not create a traditional "Trap"
                      <ul>
                        <li>It will only explode if a valid target is within its <code><a href="#0x206">Explosion Size</a></code> and <code><a href="#0x224">Cone Width</a></code>.</li>
                        <li>It will check for targets within its <code><a href="#0x206">Explosion Size</a></code> every <code><a href="#0x210">Explosion Frequency</a></code> ticks.</li>
                        <li>Projectile terminates after a number of checks equal to its <code><a href="#0x216"># Repetitions</a></code>, whether it explodes or not.</li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>Compatibility: Suppressed by <code><a href="#ExtFlags_BIT15">Rectangular AoE</a></code></li>
              </ul>
            </li>

            <li>
              bit 3 &longrightarrow; <b><a name="AreaFlags_BIT3">Delayed Trigger</a></b>
              <ul>
                <li>
                  Compatibility: <code><a href="#AreaFlags_BIT14">Skip First Condition</a></code>
                  <ul>
                    <li>First explosion is instead delayed by <code><a href="#0x210">Explosion Frequency</a></code> ticks.</li>
                  </ul>
                </li>
                <li>
                  Compatibility: <code><a href="#AreaFlags_BIT2">Triggered by Condition</a></code>
                  <ul>
                    <li>Target checks after the first will only explode after two sequential checks are passed.</li>
                  </ul>
                </li>
                <li>
                  Compatibility: <code><a href="#ExtFlags_BIT15">Rectangular AoE</a></code>
                  <ul>
                    <li>Forces this option to affect targets(s) in range <code><a href="#0x216"># Repetitions</a></code> times, checked every <code><a href="#0x210">Explosion Frequency</a></code> ticks.</li>
                    <li>Normally it would affect target(s) in range every tick for its duration.</li>
                    <li>This makes it trigger more similarly to other repeating Area Effect projectiles.</li>
                  </ul>
                </li>
              </ul>
            </li>

            <li>bit 4 &longrightarrow; <b><a name="AreaFlags_BIT4">Use secondary projectile</a></b>
              <ul>
                <li>
                  Dependency: Spell Target(<code>Creature</code>)
                  <ul>
                    <li>Activates the <code><a href="#0x214">Secondary Projectile</a></code> field.</li>
                    <li>Upon exploding, the <code><a href="#0x214">Secondary Projectile</a></code> is fired every tick at the targeted creature for the duration of the projectile.</li>
                    <li>
                      The <code><a href="#0x214">Secondary Projectile</a></code> normally does NOT deliver any effects.
                      <ul>
                        <li>It is strictly aesthetic, it carries no effects from the spell/item. A variety of projectiles use these to generate their explosion animation (via another projectile), instead of using a VVC. For instance, all of the "Sparkle Area (color) (party/not)" projectiles do this.</li>
                      </ul>
                    </li>
                    <li>Duration is controlled by <code><a href="#0x216"># Repetitions</a></code>, <code><a href="#0x210">Explosion Frequency</a></code>, and <code><a href="#AreaFlags_BIT14">Skip First Condition</a></code>.</li>
                    <li>
                      Total number of <code><a href="#0x214">Secondary Projectile</a></code>s fired:
                      <ul>
                        <li>
                          <code>If <a href="#0x216"># Repetitions</a> < 2</code>:
                          <ul>
                            <li><code>If <a href="#AreaFlags_BIT14">Skip First Condition</a>: <a href="#0x210">Explosion Frequency</a> + 1</code></li>
                            <li><code>Else: 1</code></li>
                          </ul>
                        </li>
                        <li>
                          <code>If <a href="#0x216"># Repetitions</a> > 1</code>:
                          <ul>
                            <li><code>If <a href="#AreaFlags_BIT14">Skip First Condition</a>: (<a href="#0x210">Explosion Frequency</a> + 1) * <a href="#0x216"># Repetitions</a></code></li>
                            <li><code>Else: (<a href="#0x210">Explosion Frequency</a> + 1) * (<a href="#0x216"># Repetitions</a> - 1) + 1</code></li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li>
                      Option: <code><a href="#ExtFlags_BIT0">Bounce from Walls</a></code>
                      <ul>
                        <li>Alters the <code><a href="#0x214">Secondary Projectile</a></code> to deliver effects.</li>
                        <li>Alters the <code><a href="#0x214">Secondary Projectile</a></code> to originate from the targeted creature, rather than the caster.</li>
                        <li>The <code><a href="#0x214">Secondary Projectile</a></code> will be oriented in a random direction.</li>
                        <li>Compatibility: With <code><a href="#AreaFlags_BIT11">Cone-shaped</a></code>, the <code><a href="#0x214">Secondary Projectile</a></code> will instead target the caster's location (but not the caster directly).</li>
                        <li>
                          The Traveling Projectile of the <code><a href="#0x214">Secondary Projectile</a></code> will terminate after a number of ticks equal to <code><a href="#0x210">Explosion Frequency</a></code>.
                          <ul>
                            <li>In order to hit anything, it must itself be an Area-Effect projectile (or Pass-Target projectile). As already stated, this mode only functions when the target of the spell/item is a creature (not a point), and it will only fire on that creature, not all targets in range.</li>
                            <li>Compatibility: Projectiles using <code><a href="#ExtFlags_BIT29">Limited Path Count</a></code> travel for their normal distance/duration.</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li>Either way, the Secondary Projectile is only practical for single-trigger projectiles (the Sparkle Areas or a Fireball, but not something like Web or Entangle), as the projectile is fired every tick of the projectile's duration. (Unless you want to flood the screen with visuals).</li>
                    <li>The Secondary Projectile does not fire until the projectile explodes.</li>
                  </ul>
                </li>
              </ul>
            </li>

            <li>
              bit 5 &longrightarrow; <b><a name="AreaFlags_BIT5">Use fragment graphics</a></b>
              <ul>
                <li>Activates <code><a href="#0x212">Fragment Animation</a></code>.</li>
                <li>
                  This animation is treated similar to the "Chunking" animation of creatures, launching the specified animation up and outward in various directions.
                  <ul>
                    <li>This "Chunking" will start when the projectile explodes and repeat throughout the projectile's duration, if it has one.</li>
                  </ul>
                </li>
                <li>Compatibility: <code><a href="#AreaFlags_BIT2">Triggered by Condition</a></code> will only generate fragments when it explodes, once per explosion.</li>
                <li>Compatibility: The direction these animation are launched is not limited by <code><a href="#AreaFlags_BIT11">Cone-shaped</a></code>.</li>
                <li>Compatibility: Suppressed by a non-zero <code><a href="#0x202">Ray Count</a></code>.</li>
              </ul>
            </li>

            <li>
              bit 6 &longrightarrow; <b><a name="AreaFlags_BIT6">Affect only enemies</a></b>
              <ul>
                <li>Activates <code><a href="#AreaFlags_BIT7">Affect only allies</a></code></li>
              </ul>
            </li>

            <li>
              bit 7 &longrightarrow; <b><a name="AreaFlags_BIT7">Affect only allies</a></b>
              <ul>
                <li>Flag Off: Projectile will only target enemies of the caster.</li>
                <li>Flag On: Projectile will only target allies of the caster.</li>
              </ul>
            </li>

            <li>
              bit 8 &longrightarrow; <b><a name="AreaFlags_BIT8">Mage-level duration</a></b>
              <ul>
                <li><code><a href="#0x216"># Repetitions</a></code> is replaced with the caster's Wizard Casting Level.</li>
                <li>This ignores <a href="../../opcodes/bgee.htm#op191">opcode #191</a>.</li>
                <li>(Possibly ignores Wild Mages random casting level modifier as well)</li>
              </ul>
            </li>

            <li>
              bit 9 &longrightarrow; <b><a name="AreaFlags_BIT9">Cleric-level duration</a></b>
              <ul>
                <li><code><a href="#0x216"># Repetitions</a></code> is replaced with the caster's Priest Casting Level.</li>
                <li>This ignores <a href="../../opcodes/bgee.htm#op191">opcode #191</a>.</li>
              </ul>
            </li>

            <li>
              bit 10 &longrightarrow; <b><a name="AreaFlags_BIT10">Use VVC / Draw Animation</a></b>
              <ul>
                <li>Without this flag, <code><a href="#0x21C">Explosion Animation</a></code> will only be played once when and where the projectile explodes.</li>
                <li>Without this flag, <code><a href="#0x21C">Explosion Animation</a></code> only supports <code><a href="../ie_formats/bam_v1.htm">BAM</a></code> files, with this flag it supports (<code><a href="../ie_formats/vef_v1.htm">VEF</a></code> &gt; <code><a href="../ie_formats/vvc_v1.htm">VVC</a></code> &gt; <code><a href="../ie_formats/bam_v1.htm">BAM</a></code>) files.</li>
                <li>
                  With this flag, <code><a href="#0x21C">Explosion Animation</a></code> will be played when and where the projectile explodes, and every tick throughout the projectile's duration.
                  <ul>
                    <li>These animations will stack on each other, creating an unrecognizable blob.</li>
                    <li>
                      Compatibility: With <code><a href="#ExtFlags_BIT2">Draw Center VVC Once</a></code>, this animation will once again play only once.
                      <ul>
                        <li>Works on <code><a href="../ie_formats/vef_v1.htm">VEF</a></code>, <code><a href="../ie_formats/vvc_v1.htm">VVC</a></code>, and <code><a href="../ie_formats/bam_v1.htm">BAM</a></code> files, but <code><a href="../ie_formats/vef_v1.htm">VEF</a></code>/<code><a href="../ie_formats/vvc_v1.htm">VVC</a></code> files can manually set their duration to match the projectile duration.</li>
                      </ul>
                    </li>
                    <li>
                      Compatibility: With <code><a href="#ExtFlags_BIT4">Face Target</a></code>, this animation can be oriented in the direction of casting (the <code><a href="../ie_formats/vvc_v1.htm">VVC</a></code> and its <code><a href="../ie_formats/bam_v1.htm">BAM</a></code> must be setup to do so as well).
                      <ul>
                        <li>This requires the <code><a href="#0x21C">Explosion Animation</a></code> to include a <code><a href="../ie_formats/vvc_v1.htm">VVC</a></code> (<code><a href="../ie_formats/vef_v1.htm">VEF</a></code> optional), not just a <code><a href="../ie_formats/bam_v1.htm">BAM</a></code>.</li>
                        <li>Any mirroring must be specified in the <code><a href="../ie_formats/vvc_v1.htm">VVC</a></code>.</li>
                        <li>The VVC <code><a href="../ie_formats/vvc_v1.htm#0x40">Travel Orientation</a></code> must use <code><a href="../ie_formats/vvc_v1.htm#0x40_BIT0">Face Target</a></code>.</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>

            <li>bit 11 &longrightarrow; <b><a name="AreaFlags_BIT11">Cone-shaped</a></b>
              <ul>
                <li>It requires all targets to be in the caster's line of sight.</li>
                <li>Cone-shaped projectiles automatically exclude the caster.</li>
                <li>Compatibility: Not usable with <code><a href="#ExtFlags_BIT13">Comet</a></code>.</li>
                <li>
                  Area: Restricted to arc oriented in direction of casting.
                  <ul>
                    <li>Area radius remains = <code><a href="#0x206">Explosion Size</a></code> pixels.</li>
                    <li><code>Arc Size = direction of casting +/- <a href="#0x224">Cone Width</a> / 2 degrees</code></li>
                  </ul>
                </li>
                <li>
                  Projectile explodes instantly, at caster's location. The following originate from the caster's location:
                  <ul>
                    <li><code><a href="#AreaFlags_BIT0">Trap Visible</a></code>, <code><a href="#0x21A">Explosion Projectile</a></code>, <code><a href="#0x217">Explosion Effect</a></code>, <code><a href="#0x21C">Explosion Animation</a></code></li>
                    <li>
                      The instant explosion effectively suppresses the <code>0x100 – 0x1ff|Traveling Projectile Animation</code>, and all flags/fields that affect it.
                      <ul>
                        <li>Except as used by <code><a href="#AreaFlags_BIT0">Trap Visible</a></code>.</li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>Compatibility: <code><a href="#ExtFlags_BIT15">Rectangular AoE</a></code> will override the changes to the affected area, but not changes to the visual explosion.</li>
                <li>Suppresses: <code><a href="#ExtFlags_BIT1">Pass Target</a></code></li>
                <li>
                  Option: <code><a href="#AreaFlags_BIT2">Triggered by Condition</a></code> – Explosion only occurs if valid targets are within range when cast.
                  <ul>
                    <li>Does not create a traditional "Trap".</li>
                    <li><code><a href="#AreaFlags_BIT0">Trap Visible</a></code> still plays as normal.</li>
                  </ul>
                </li>
                <li>
                  Option: <code><a href="#ExtFlags_BIT3">Hit Immediately</a></code> – Explosion occurs at targeted location, instead of caster's location.
                  <ul>
                    <li>Caster is not affected by the explosion, even if they are in the affected area.</li>
                    <li>Option: Spell Target(<code>Creature</code>) – Cone arc is oriented in the opposite direction of the targeted creature's current facing.</li>
                    <li>Option: Spell Target(<code>Location</code>) – Cone arc is oriented to the Right/East.</li>
                  </ul>
                </li>
                <li>
                  Option: <code><a href="#ExtFlags_BIT12">Falling Path</a></code> – Explosion occurs at targeted location, instead of caster's location.
                  <ul>
                    <li>Caster is not affected by the explosion, even if they are in the affected area.</li>
                    <li>Cone arc is oriented to the Right/East.</li>
                    <li>Suppressed: <code><a href="#AreaFlags_BIT0">Trap Visible</a></code></li>
                  </ul>
                </li>
              </ul>
            </li>

            <li>
              bit 12 &longrightarrow; <b><a name="AreaFlags_BIT12">Ignore LOS</a></b>
              <ul>
                <li>Without this flag, <code><a href="#0x21C">Explosion Animation</a></code> is blocked by walls.</li>
                <li>With this flag, <code><a href="#0x21C">Explosion Animation</a></code> is not blocked by walls.</li>
              </ul>
            </li>

            <li>
              bit 13 &longrightarrow; <b><a name="AreaFlags_BIT13">Delayed explosion</a></b>
              <ul>
                <li>
                  Compatibility: When used with <code><a href="#AreaFlags_BIT0">Trap Visible</a></code>:
                  <ul>
                    <li>The projectile will not explode until the 30<sup>th</sup> frame of the animation created by <code><a href="#AreaFlags_BIT0">Trap Visible</a></code>.</li>
                    <li>The <code><a href="#0x210">Explosion Frequency</a></code> is delayed until that time, after which it will explode as normal until the animation ends.</li>
                    <li>The animation will then start over, <code><a href="#0x210">Explosion Frequency</a></code> will reset, and again be delayed until until frame 30 of the animation.</li>
                    <li>
                      This delay applies even to explosions that are not controlled by the <code><a href="#0x210">Explosion Frequency</a></code>:
                      <ul>
                        <li>Such as when using <code><a href="#ExtFlags_BIT15">Rectangular AoE</a></code> or when the target is in-between the <code><a href="#0x204">Trap Size</a></code> and <code><a href="#0x206">Explosion Size</a></code>.</li>
                      </ul>
                    </li>
                    <li>
                      This requires the <code><a href="#0x104">Projectile Animation</a></code> to have at least 30 frames – This is the animation used by <code><a href="#AreaFlags_BIT0">Trap Visible</a></code>.
                      <ul>
                        <li>Otherwise the projectile will never explode (but still disable saving as an active <code><a href="#0x8_3">Area Effect</a></code> projectile).</li>
                      </ul>
                    </li>
                    <li>It is very likely that the 30<sup>th</sup> frame is a hardcoded value and cannot be changed.</li>
                  </ul>
                </li>
              </ul>
            </li>

            <li>
              bit 14 &longrightarrow; <b><a name="AreaFlags_BIT14">Skip first condition</a></b>
              <ul>
                <li>First explosion does not trigger any <code><a href="#0x21A">Explosion Projectile</a></code> (no one is affected), and does not count towards <code><a href="#0x216"># Repetitions</a></code>.</li>
                <li>Option: <code><a href="#AreaFlags_BIT3">Delayed Trigger</a></code> – First explosion is instead delayed <code><a href="#0x210">Explosion Frequency</a></code> ticks, and otherwise works as normal.</li>
              </ul>
            </li>

            <li>
              bit 15 &longrightarrow; <b><a name="AreaFlags_BIT15">Single target</a></b>
              <ul>
                <li>Activates fields <code><a href="#0x244"># dice for multiple targets</a></code> and <code><a href="#0x246">Dice size for multiple targets</a></code>.</li>
                <li>Activates <code><a href="#AreaExtFlags_BIT10">Use HD lookup</a></code> and <code><a href="#AreaExtFlags_BIT15">Hit Point Limit</a></code>.</li>
                <li>This field limits the number of valid targets for each explosion to <code>XdY</code>, where <code>X = <a href="#0x244"># dice for multiple targets</a></code>, and <code>Y = <a href="#0x246">Dice size for multiple targets</a></code>.</li>
                <li>
                  Option: <code><a href="#AreaExtFlags_BIT10">Use HD lookup</a></code>
                  <ul>
                    <li>
                      Each explosion will only affect targets whose HD/level is equal to or less than <code>XdY</code>, where <code>X = <a href="#0x244"># dice for multiple targets</a></code>, and <code>Y = <a href="#0x246">Dice size for multiple targets</a></code>.
                      <ul>
                        <li>(BUG, at least on EE games) Regardless of Dice values, it cannot affect creatures whose HD/Level is 9 or greater.</li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>
                  Option: <code><a href="#AreaExtFlags_BIT15">Hit Point Limit</a></code>
                  <ul>
                    <li>Each explosion will only affect targets whose current Hit Points are equal or less than <code><a href="#0x246">Dice size for multiple targets</a></code>.</li>
                    <li>Each explosion will only affect a total number of targets whose current Hit Point total is equal or less than <code><a href="#0x244"># dice for multiple targets</a></code>.</li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
          Further bits are unused
        </td>
      </tr>

      <tr>
        <td>0x00202</td>
        <td>2 (word)</td>
        <td><b><a name="0x202">Ray Count</a></b> (EE only...?)
          <ul>
            <li>Suppresses the <code><a href="#AreaFlags_BIT4">Secondary Projectile</a></code> flag.</li>
            <li>
              It causes the <code><a href="#0x21A">Explosion Projectile</a></code> to be fired <code>Ray Count</code> amount of times.
              <ul>
                <li>
                  Setting the <code><a href="#AreaFlags_BIT11">Cone-shaped</a></code> bit will cause the rays to spawn at the location of the caster. If this bit is not set and the <code><a href="#0x202">Ray Count</a></code> is nonzero, then the rays will spawn at the location of the explosion of the projectile.
                </li>
                <li>
                  The direction of the first ray is no longer fixed towards the southeast but is determined as follows:
                  <ol>
                    <li>if the <code><a href="#AreaFlags_BIT11">Cone-shaped</a></code> bit is disabled, the first ray will continue in the same direction as the parent projectile using a vector of the caster's location to the explosion point.</li>
                    <li>if the <code><a href="#AreaFlags_BIT11">Cone-shaped</a></code> bit is enabled, the first ray will travel from the caster's position towards the destination/casting point.</li>
                  </ol>
                </li>
                <li>
                  Further rays are generated based on how <code><a href="#0x224">cone angle/angle between rays</a></code> is set.
                </li>
                <li>
                  As of v2.6, you may nest rays in one another to construct complex-shaped areas of effect. In terms of nesting multiple rays, the point of origin of the ray one higher up the "chain" is treated as the caster's position.
                </li>
              </ul>
            </li>
            <li>The <code><a href="#0x21A">Explosion Projectile</a></code> must be capable of hitting creatures while targeting a location or they will be just for show (<code><a href="#0x8_3">Area Effect</a></code> or <code><a href="#ExtFlags_BIT1">Pass Target</a></code>).</li>
            <li>
              The <code><a href="#0x21A">Explosion Projectile</a></code>'s Travelling Projectile will terminate upon reaching the <code><a href="#0x206">Explosion Size</a></code> of this projectile.
              <ul>
                <li>
                  For lightning bolt-type projectiles, this distance is used up, even as the bolt bounces (see <code>"LIGHTB.pro"</code> in BG1/2:EE and <code>"IDPRO40.pro"</code> in IWD:EE as examples).
                </li>
                <li>
                  For <code><a href="#0x8_2">single-target</a></code> projectiles, they simply travel that distance before disappearing.
                </li>
                <li>
                  For <code><a href="#0x8_3">area-of-effect</a></code> projectiles (f.i. <code>"FIREBALL.pro"</code>), they explode normally when reaching that distance. And as mentioned earlier, <code><a href="#0x8_3">area-of-effect</a></code> child projectiles can also use the ray feature themselves to generate additional rays with the direction vector determined as mentioned above.
                </li>
                <li>This termination also applies to projectiles using <code><a href="#ExtFlags_BIT1">Pass Target</a></code>, which normally do not terminate upon reaching their destination.</li>
              </ul>
            </li>
            <li>
              An <code><a href="#0x21A">Explosion Projectile</a></code> will explode at a distance equal to the <code><a href="#0x204">Trap Size</a> * "X"</code> (see below) of this projectile.
              <ul>
                <li>Only <code><a href="#0x8_3">Area Effect</a></code> projectiles can explode. Those with <code><a href="#AreaFlags_BIT11">Cone-shaped</a></code> will still explode instantly.</li>
                <li>
                  The exact multiplier formula is unknown – but it's not linear.
                  <ul>
                    <li>The maximum trap size for an explosion size of <code>480</code> to explode before terminating is a trap size of <code>277</code> (about <code>1.73x</code>).</li>
                    <li>The maximum trap size for an explosion size of <code>240</code> to explode before terminating is a trap size of <code>150</code> (<code>1.6x</code>).</li>
                    <li>The maximum trap size for an explosion size of <code>120</code> to explode before terminating is a trap size of <code>86</code> (about <code>1.39x</code>).</li>
                    <li>The maximum trap size for an explosion size of <code>60</code> to explode before terminating is a trap size of <code>43</code> (about <code>1.39x</code>).</li>
                    <li>
                      The distance (<code><a href="#0x204">Trap Size</a></code>) to explode does NOT account for the vertical proportion of the game (where <code>vertical distance = &frac34; horizontal distance</code>).
                      <ul>
                        <li>The distance (<code><a href="#0x206">Explosion Size</a></code>) for the Traveling Projectile does take the proportion into account.</li>
                        <li>The same value may explode a projectile going horizontal but not one going vertical, if the <code><a href="#0x206">Explosion Size</a></code> terminates it before reaching the distance.</li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </td>
      </tr>

      <tr>
        <td>0x00204</td>
        <td>2 (word)</td>
        <td><b><a name="0x204">Trigger Radius / Trap Size</a></b> (divide by approx 8.5 to receive diameter in feet)
          <ul>
            <li>It is generally set equal to <code><a href="#0x206">Explosion Size</a></code>, unless you're using the <code><a href="#ExtFlags_BIT15">Rectangular AoE</a></code> flag (Wall spells) or the <code><a href="#AreaFlags_BIT2">Triggered by Condition</a></code> flag (actual Traps).</li>
            <li>Value is Horizontal Pixels, &frac34; value is Vertical Pixels, <code>16 (12) = 1 foot</code>.</li>
            <li>Maximum effective Value: <code>448 (28 feet)</code>.</li>
            <li>Proximity Radius to trigger projectile using <code><a href="#AreaFlags_BIT2">Triggered by Condition</a></code>.</li>
            <li>Parallel Length (relative to casting direction) when using <code><a href="#ExtFlags_BIT15">Rectangular AoE</a></code>.</li>
            <li>
              Proximity Radius to enforce <code><a href="#0x210">Explosion Frequency</a></code> for repeating projectiles.
              <ul>
                <li>Those outside this radius but still within the <code><a href="#0x206">Explosion Size</a></code> will be hit once every tick.</li>
                <li>Does not apply when using <code><a href="#AreaFlags_BIT2">Triggered by Condition</a></code> or <code><a href="#ExtFlags_BIT15">Rectangular AoE</a></code>.</li>
              </ul>
            </li>
            <li>
              Explosion distance of <code><a href="#0x21A">Explosion Projectile</a></code>'s Traveling Projectile when using <code><a href="#0x202">Ray Count</a></code>.
              <ul>
                <li>The distance is one of the few/only that does NOT account for the vertical proportion of the game (where <code>vertical distance = &frac34; horizontal distance</code>).</li>
              </ul>
            </li>
          </ul>
        </td>
      </tr>

      <tr>
        <td>0x00206</td>
        <td>2 (word)</td>
        <td><b><a name="0x206">Area of effect / Explosion Size</a></b> (divide by approx 8.5 to receive diameter in feet)
          <ul>
            <li>It defines the radius of the projectile.</li>
            <li>Uses absolute value, or negative values use the same area as their positive counterpart.</li>
            <li>Value is Horizontal Pixels, &frac34; value is Vertical Pixels, <code>16 (12) = 1 foot</code>.</li>
            <li>Maximum effective Value: <code>32768 (2048 feet) // Default visual range = 448</code>.</li>
            <li>Effect Radius to trigger an <code><a href="#0x21A">Explosion Projectile</a></code> on a creature.</li>
            <li>Perpendicular Length (relative to casting direction) when using <code><a href="#ExtFlags_BIT15">Rectangular AoE</a></code>.</li>
            <li>
              Terminating distance of <code><a href="#0x21A">Explosion Projectile</a></code>'s Traveling Projectile when using <code><a href="#0x202">Ray Count</a></code>.
              <ul>
                <li>This termination also applies to projectile using <code><a href="#ExtFlags_BIT1">Pass Target</a></code>, which normally do not terminate upon reaching their destination.</li>
              </ul>
            </li>
          </ul>
        </td>
      </tr>

      <tr>
        <td>0x00208</td>
        <td>8 (resref)</td>
        <td>
          <b><a name="0x208">Explosion Sound</a></b>
          <ul>
            <li>
              Sound is played each tick of the projectile's duration once it explodes.
              <ul>
                <li>Should only be used for one-shot projectiles (Fireball), not be used for repeating projectiles (Web).</li>
              </ul>
            </li>
          </ul>
        </td>
      </tr>

      <tr>
        <td>0x00210</td>
        <td>2 (word)</td>
        <td><b><a name="0x210">Explosion delay (Frequency)</a></b>
          <ul>
            <li>Along with <code><a href="#0x216"># Repetitions</a></code> and <code><a href="#AreaFlags_BIT3">Delayed Trigger</a></code> and <code><a href="#AreaFlags_BIT14">Skip First Condition</a></code>, determines the duration of the projectile.</li>
            <li>
              Determines how often (in ticks, <code>100 ticks = 1 round</code>) the projectile checks for targets within its <code><a href="#0x204">Trap Size</a></code>. The total duration is generally <code><a href="#0x210">Frequency</a> * <a href="#0x216"># Repetitions</a></code>.
              <ul>
                <li>Targets outside its <code><a href="#0x204">Trap Size</a></code> but within its <code><a href="#0x206">Explosion Size</a></code> are checked every tick of the duration.</li>
              </ul>
            </li>
            <li>
              Compatibility: When using <code><a href="#ExtFlags_BIT15">Rectangular AoE</a></code>, it only determines check frequency when used with <code><a href="#AreaFlags_BIT3">Delayed Trigger</a></code>.
              <ul>
                <li>Projectiles using <code><a href="#ExtFlags_BIT15">Rectangular AoE</a></code> without <code><a href="#AreaFlags_BIT3">Delayed Trigger</a></code> check for targets every tick of their duration.</li>
              </ul>
            </li>
          </ul>
        </td>
      </tr>

      <tr>
        <td>0x00212</td>
        <td>2 (short)</td>
        <td>
          <b><a name="0x212">Fragment Animation</a></b> (<a href="../../files/ids/bgee/animate.htm">ANIMATE.IDS</a>)
          <ul>
            <li>Dependency: Activated by <code><a href="#AreaFlags_BIT5">Fragments</a></code>.</li>
            <li>This animation is treated similar to the "Chunking" animation of creatures, launching the specified animation up and outward in various directions.</li>
            <li>Compatibility: <code><a href="#AreaFlags_BIT2">Triggered by Condition</a></code> will only generate fragments when it explodes, once per explosion.</li>
            <li>Compatibility: The direction these animation are launched is not limited by <code><a href="#AreaFlags_BIT11">Cone-shaped</a></code>.</li>
            <li>Compatibility: Suppressed by a non-zero <code><a href="#0x202">Ray Count</a></code>.</li>
          </ul>
        </td>
      </tr>

      <tr>
        <td>0x00214</td>
        <td>2 (word)</td>
        <td>
          <b><a name="0x214">Secondary Projectile</a></b> (<code><a href="../../files/ids/bgee/projectl.htm">PROJECTL.IDS</a> - 1</code>)
          <ul>
            <li>Dependency: Activated by <code><a href="#AreaFlags_BIT4">Secondary Projectile</a></code>.</li>
            <li>Dependency: Spell Target(<code>Creature</code>).</li>
            <li>
              Upon exploding, this projectile is fired every tick at the targeted creature for the duration of the projectile.
              <ul>
                <li>The targeted creature does NOT need to be within either the <code><a href="#0x204">Trap Size</a></code> or <code><a href="#0x206">Explosion Size</a></code>.</li>
              </ul>
            </li>
            <li>Duration is controlled by <code><a href="#0x216"># Repetitions</a></code>, <code><a href="#0x210">Explosion Frequency</a></code>, and <code><a href="#AreaFlags_BIT14">Skip First Condition</a></code>.</li>
            <li>
              Total number of <code><a href="#0x214">Secondary Projectile</a></code>s fired:
              <ul>
                <li>
                  <code>If <a href="#0x216"># Repetitions</a> < 2</code>:
                  <ul>
                    <li><code>If <a href="#AreaFlags_BIT14">Skip First Condition</a>: <a href="#0x210">Explosion Frequency</a> + 1</code></li>
                    <li><code>Else: 1</code></li>
                  </ul>
                </li>
                <li>
                  <code>If <a href="#0x216"># Repetitions</a> > 1</code>:
                  <ul>
                    <li><code>If <a href="#AreaFlags_BIT14">Skip First Condition</a>: (<a href="#0x210">Explosion Frequency</a> + 1) * <a href="#0x216"># Repetitions</a></code></li>
                    <li><code>Else: (<a href="#0x210">Explosion Frequency</a> + 1) * (<a href="#0x216"># Repetitions</a> - 1) + 1</code></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li>
              Option: <code><a href="#ExtFlags_BIT0">Bounce from walls</a></code>
              <ul>
                <li>Alters the <code><a href="#0x214">Secondary Projectile</a></code> to deliver effects.</li>
                <li>Alters the <code><a href="#0x214">Secondary Projectile</a></code> to originate from the targeted creature, rather than the caster.</li>
                <li>The <code><a href="#0x214">Secondary Projectile</a></code> will be oriented in a random direction.</li>
                <li>Compatibility: With <code><a href="#AreaFlags_BIT11">Cone-shaped</a></code>, the <code><a href="#0x214">Secondary Projectile</a></code> will instead target the caster's location (but not the caster directly).</li>
                <li>
                  The Traveling Projectile of the <code><a href="#0x214">Secondary Projectile</a></code> will terminate after a number of ticks equal to <code><a href="#0x210">Explosion Frequency</a></code>.
                  <ul>
                    <li>It will need to impact <code><a href="#0x8_2">Single Target</a></code> or explode <code><a href="#0x8_3">Area Effect</a></code> before then.</li>
                    <li>Compatibility: Projectiles using <code><a href="#ExtFlags_BIT29">Limited Path Count</a></code> travel for their normal distance/duration.</li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </td>
      </tr>

      <tr>
        <td>0x00216</td>
        <td>1 (byte)</td>
        <td>
          <b><a name="0x216">Trigger Count / # Repetitions</a></b> (used if bits 8 and 9 at 0x200 are not set)
          <ul>
            <li>Along with <code><a href="#0x210">Explosion Frequency</a></code> and <code><a href="#AreaFlags_BIT2">Delayed Trigger</a></code> and <code><a href="#AreaFlags_BIT14">Skip First Condition</a></code>, determines the duration of the projectile.</li>
            <li>A value of <code>0</code> and <code>1</code> are often (but not always) treated the same (as <code>1</code>) – still researching...</li>
            <li>
              Determines how many times the projectile checks for targets within its <code><a href="#0x204">Trap Size</a></code>.
              <ul>
                <li>Target(s) outside its <code><a href="#0x204">Trap Size</a></code> but within its <code><a href="#0x206">Explosion Size</a></code> are checked every tick of the duration.</li>
              </ul>
            </li>
            <li>
              Compatibility: When using <code><a href="#ExtFlags_BIT15">Rectangular AoE</a></code>, it only determines check count when used with <code><a href="#AreaFlags_BIT3">Delayed Trigger</a></code>.
              <ul>
                <li>Projectiles using <code><a href="#ExtFlags_BIT15">Rectangular AoE</a></code> without <code><a href="#AreaFlags_BIT3">Delayed Trigger</a></code> check for targets every tick of their duration.</li>
              </ul>
            </li>
            <li>
              Compatibility: When using <code><a href="#AreaFlags_BIT2">Triggered by Condition</a></code>:
              <ul>
                <li>Projectile will remain until it has triggered this many times.</li>
              </ul>
            </li>
          </ul>
        </td>
      </tr>

      <tr>
        <td>0x00217</td>
        <td>1 (byte)</td>
        <td><b><a name="0x217">Explosion Effect</a></b> (<a href="../../files/ids/bgee/fireball.htm">FIREBALL.IDS</a>)</td>
      </tr>
      <tr>
        <td>0x000218</td>
        <td>1 (byte)</td>
        <td><b><a name="0x218">Explosion Color</a></b></td>
      </tr>
      <tr>
        <td>0x000219</td>
        <td>1 (byte)</td>
        <td>Unused</td>
      </tr>

      <tr>
        <td>0x00021a</td>
        <td>2 (bytes)</td>
        <td>
          <b><a name="0x21A">Explosion Projectile</a></b> (<a href="../../files/ids/bgee/projectl.htm">PROJECTL.IDS</a>), played on affected creatures
          <ul>
            <li>
              This projectile is fired, originating from the point of explosion, at every valid target within range, for every explosion.
              <ul>
                <li>The <code><a href="#0x21A">Explosion Projectile</a></code> will always target a <code>creature/object</code>, not a <code>location</code>.</li>
              </ul>
            </li>
            <li>
              Compatibility: When using <code><a href="#0x202">Ray Count</a></code>:
              <ul>
                <li>The <code><a href="#0x21A">Explosion Projectile</a></code> will always target a <code>location</code>, not a <code>creature/object</code>.</li>
              </ul>
            </li>
            <li>For <code><a href="#0x8_3">Area Effect</a></code> projectiles, this is normally what delivers the <a href="../ie_formats/spl_v1.htm#splv1_Feature_Block">spell</a>/<a href="../ie_formats/itm_v1.htm#itmv1_Feature_Block">item</a> effects to their target.</li>
            <li>Compatibility: Projectiles using <code><a href="#ExtFlags_BIT14">Lined up AoE</a></code> will NOT function as an Explosion Projectile.</li>
            <li>
              Compatibility: Projectiles using <code><a href="#ExtFlags_BIT10">Multiple Projectile</a></code> will ignore that flag when used as an Explosion Projectile.
              <ul>
                <li>This does NOT include the still hardcoded Magic Missile projectiles.</li>
              </ul>
            </li>
            <li>The explosion projectile otherwise functions as normal for its parameters.</li>
          </ul>
        </td>
      </tr>

      <tr>
        <td>0x00021c</td>
        <td>8 (resref)</td>
        <td>
          <b><a name="0x21C">Explosion Animation</a></b> (<a href="vvc_v1.htm">VVC</a>)
          <ul>
            <li>Activated by any <code><a href="#0x217">Explosion Effect<a></code> other than <code>255</code>.</li>
            <li>Activated by <code><a href="#AreaFlags_BIT10">Draw Animation</a></code> when using <code><a href="#0x217">Explosion Effect<a> = 255</code>.</li>
            <li>This animation is played, at the point of explosion, the first time the projectile explodes.</li>
            <li>Option: <code><a href="#AreaExtFlags_BIT3">Paletted Center</a></code> will cause this animation to be recolored by the <code><a href="#0x218">Explosion Color</a></code> field.</li>
            <li>Option: <code><a href="#AreaExtFlags_BIT13">Blend Area/Ring Anim</a></code> will add transparency to the animation (for <a href="../ie_formats/bam_v1.htm">BAM</a> files, <a href="../ie_formats/vvc_v1.htm">VVC</a> can do this themselves).</li>
            <li>Option: <code><a href="#AreaExtFlags_BIT14">Glow Area/Ring Anim</a></code> will brighten the animation ,generally make it "glow" (for <a href="../ie_formats/bam_v1.htm">BAM</a> files, <a href="../ie_formats/vvc_v1.htm">VVC</a> can do this themselves).</li>
            <li>Compatibility: With <code><a href="#AreaFlags_BIT10">Draw Animation</a></code>, this field supports (<a href="../ie_formats/vef_v1.htm">VEF</a>&gt;<a href="../ie_formats/vvc_v1.htm">VVC</a>&gt;<a href="../ie_formats/bam_v1.htm">BAM</a>) files.</li>
            <li>
              Compatibility: With <code><a href="#AreaFlags_BIT10">Draw Animation</a></code>, the animation is played again every tick of the projectile's duration.
              <ul>
                <li>These animations will stack on each other, creating an unrecognizable blob.</li>
                <li>
                  Compatibility: With <code><a href="#ExtFlags_BIT2">Draw Center VVC Once</a></code>, this animation will once again play only once, the first time the projectile explodes.
                  <ul>
                    <li>Works on <a href="../ie_formats/vef_v1.htm">VEF</a>, <a href="../ie_formats/vvc_v1.htm">VVC</a>, and <a href="../ie_formats/bam_v1.htm">BAM</a> files, but <a href="../ie_formats/vef_v1.htm">VEF</a>/<a href="../ie_formats/vvc_v1.htm">VVC</a> files can manually set their duration to match the projectile duration.</li>
                  </ul>
                </li>
                <li>
                  Compatibility: With <code><a href="#ExtFlags_BIT4">Face Target</a></code>, this animation can be oriented in the direction of casting (the <a href="../ie_formats/vvc_v1.htm">VVC</a> and its <a href="../ie_formats/bam_v1.htm">BAM</a> must be setup to do so as well).
                  <ul>
                    <li>This requires the <code><a href="#0x21C">Explosion Animation</a></code> to include a <a href="../ie_formats/vvc_v1.htm">VVC</a> (<a href="../ie_formats/vef_v1.htm">VEF</a> optional), not just a <a href="../ie_formats/bam_v1.htm">BAM</a>.</li>
                    <li>Any mirroring must be specified in the VVC.</li>
                    <li>The VVC <code><a href="../ie_formats/vvc_v1.htm#0x40">Travel Orientation</a></code> must use <code><a href="../ie_formats/vvc_v1.htm#0x40_BIT0">Face Target</a></code>.</li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </td>
      </tr>

      <tr>
        <td>0x000224</td>
        <td>2 (word)</td>
        <td>
          <b><a name="0x224">Cone Width / Angle between Rays</a></b> (<code>0 – 65535</code>, effectively capped at <code>359</code>)
          <ul>
            <li>Angle is <code>+1</code> specified value.</li>
            <li>Dependency: This field can be activated by either <code><a href="#AreaFlags_BIT11">Cone-shaped</a></code> or <code><a href="#0x202">Ray Count</a></code>.</li>
            <li>
              Option: With <code><a href="#AreaFlags_BIT11">Cone-shaped</a></code>
              <ul>
                <li>This value controls the Arc Size of the cone.</li>
                <li><code>Arc Size = direction of casting +/- <a href="#0x224">Cone Width</a> / 2 degrees</code>.</li>
              </ul>
            </li>
            <li>
              Option: With <code><a href="#0x202">Ray Count</a> > 0</code>
              <ul>
                <li>This will generate additional rays relative to the initial direction of the first ray.</li>
                <li>
                  They will be generated on alternating sides of the first ray at angle increments set by this field.
                  <ul>
                    <li>For instance, if <code><a href="#0x202">Ray Count</a></code> is set to <code>5</code> and this field is set to <code>45</code>, then rays will be generated at angles <code>-90</code>, <code>-45</code>, <code>0</code>, <code>45</code>, <code>90</code> degrees relative to the direction vector as described <a href="#0x202">above</a>.</li>
                    <li>Note that if <code><a href="#0x202">Ray Count</a></code> is an even number, the ray group will be asymmetrical unless you rotate them (see <a href="#0x226">below</a>).</li>
                    <li>In Spiritual Wrath's case (<code>"IDPRO312.pro"</code> in IWD:EE), there are 4 rays at 90 degree angles from one another, making them appear symmetrical.</li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </td>
      </tr>

      <tr>
        <td colspan="3"><b>The following fields are used by Enhanced Editions games only:</b></td>
      </tr>
      <tr>
        <td>0x00226</td>
        <td>2 (word)</td>
        <td>
          <b><a name="0x226">Rotate rays clockwise</a></b>
          <ul>
            <li>Setting this field (<code>0–359</code>) will rotate the entire set of <code><a href="#0x202">Rays</a></code> spawned by the explosion clockwise.</li>
          </ul>
        </td>
      </tr>

      <tr>
        <td>0x00228</td>
        <td>8 (resref)</td>
        <td>
          <b><a name="0x228">Spread Animation</a></b> (<a href="vef_v1.htm">VEF</a>/<a href="vvc_v1.htm">VVC</a>/<a href="bam_v1.htm">BAM</a>)
          <ul>
            <li>Dependency: Activated by <code><a href="#0x217">Explosion Effect</a></code> not being value <code>255|None</code>.</li>
            <li>This animation is played in "rings" around the point of origin, out to the <code><a href="#0x206">Explosion Size</a></code>.</li>
            <li>Each of these "rings" has a radius in increments of <code><a href="#0xA">Speed</a></code>, resulting in a total number of rings equal to <code><a href="#0x206">Explosion Size</a> / <a href="#0xA">Speed</a></code>.</li>
            <li>
              Each of these "rings" starts playing <code><a href="#0xA">Speed</a></code> ticks after the previous, starting with the innermost.
              <ul>
                <li>The animations will loop until:<br/>
                  Once the outer-most "ring" has begun playing and the projectile's duration has expired, the "rings" will disappear at the same rate, starting with the outer-most "ring".
                </li>
              </ul>
            </li>
            <li>
              The density of animations in each ring is controlled by fields <code><a href="#0x248">Animation Granularity</a></code> and <code><a href="#0x24A">Animation Granularity Divider</a></code>.
              <ul>
                <li>Lower values result in higher animation density, but very low values will create clear "gaps" in each of the diagonal directions.</li>
              </ul>
            </li>
            <li>This animation will play all of its cycles/sequences in order, and cannot be oriented.</li>
            <li>Defunct: <code><a href="#AreaExtFlags_BIT5">Paletted Animation</a></code> should cause this animation to be recolored by the <code><a href="#0x218">Explosion Color</a></code> field, but instead just recolors it all black.</li>
            <li>Option: <code><a href="#AreaExtFlags_BIT13">Blend Area/Ring Anim</a></code> will add transparency to the animation.</li>
            <li>Option: <code><a href="#AreaExtFlags_BIT14">Glow Area/Ring Anim</a></code> will brighten the animation (generally make it "glow").</li>
            <li>Option: <code><a href="#AreaExtFlags_BIT2">Start Scattered</a></code> will cause each of these animations to play at random intervals instead of looping continuously throughout the duration.</li>
          </ul>
        </td>
      </tr>

      <tr>
        <td>0x00230</td>
        <td>8 (resref)</td>
        <td>
          <b><a name="0x230">Ring Animation</a></b> (<a href="vef_v1.htm">VEF</a>/<a href="vvc_v1.htm">VVC</a>/<a href="bam_v1.htm">BAM</a>)
          <ul>
            <li>Dependency: Activated by <code><a href="#0x217">Explosion Effect</a></code> not being value <code>255|None</code>.</li>
            <li>This animation expands outward from the point of origin, out to the <code><a href="#0x206">Explosion Size</a></code>, and a rate of <code><a href="#0xA">Speed</a></code>.</li>
            <li>
              The density of animations is controlled by fields <code><a href="#0x248">Animation Granularity</a></code> and <code><a href="#0x24A">Animation Granularity Divider</a></code>.
              <ul>
                <li>Lower values result in higher animation density, but very low values will create clear "gaps" in each of the diagonal directions.</li>
              </ul>
            </li>
            <li>Defunct: <code><a href="#AreaExtFlags_BIT0">Paletted Ring</a></code> should cause this animation to be recolored by the <code><a href="#0x218">Explosion Color</a></code> field, but instead just recolors it all black.</li>
            <li>
              Option: <code><a href="#AreaExtFlags_BIT9">Oriented fireball puffs</a></code> will orient the animation in the direction it's travelling.
              <ul>
                <li>It can only mirror horizontally, not vertically. The animation will need at least these 9 directions to be properly oriented: S, SSW, SW, WSW, W, WNW, NW, NNW, N</li>
              </ul>
            </li>
            <li>Option: <code><a href="#AreaExtFlags_BIT13">Blend Area/Ring Anim</a></code> will add transparency to the animation.</li>
            <li>Option: <code><a href="#AreaExtFlags_BIT14">Glow Area/Ring Anim</a></code> will brighten the animation (generally make it "glow").</li>
          </ul>
        </td>
      </tr>

      <tr>
        <td>0x00238</td>
        <td>8 (resref)</td>
        <td>
          <b><a name="0x238">Area Sound</a></b> (<a href="wavc_v1.htm">WAV</a>)
          <ul>
            <li>This sound is played for the duration of the <code><a href="#0x230">Ring Animation</a></code>'s expansion, or <code><a href="#0x206">Explosion</a> / <a href="#0xA">Speed</a></code> ticks.</li>
          </ul>
        </td>
      </tr>

      <tr>
        <td>0x00240</td>
        <td>4 (dword)</td>
        <td>Extended flags
          <ul>
            <li>
              Bit 0 &longrightarrow; <b><a name="AreaExtFlags_BIT0">Paletted ring</a></b>
              <ul>
                <li>(Defunct) Should cause <code><a href="#0x230">Ring Animation</a></code> to be recolored by the <code><a href="#0x218">Explosion Color</a></code> field, but instead just recolors it all black.</li>
              </ul>
            </li>

            <li>
              Bit 1 &longrightarrow; <b><a name="AreaExtFlags_BIT1">Random speed</a></b>
              <ul>
                <li>
                  Affects expansion rate of <code><a href="#0x230">Ring Animation</a></code> and <code><a href="#0x228">Spread Animation</a></code>, but not certain of how.
                  <ul>
                    <li>Might require <code><a href="#AreaExtFlags_BIT2">Start Scattered</a></code> and/or <code><a href="#AreaExtFlags_BIT4">Repeat Scattering</a></code>.</li>
                  </ul>
                </li>
              </ul>
            </li>

            <li>
              Bit 2 &longrightarrow; <b><a name="AreaExtFlags_BIT2">Start scattered</a></b>
              <ul>
                <li>Causes each of the <code><a href="#0x21C">Explosion Animation</a></code>s to play at random intervals instead of looping continuously throughout the duration.</li>
              </ul>
            </li>

            <li>
              Bit 3 &longrightarrow; <b><a name="AreaExtFlags_BIT3">Paletted center</a></b>
              <ul>
                <li>Cause the <code><a href="#0x21C">Explosion Animation</a></code> to be recolored by the <code><a href="#0x218">Explosion Color</a></code> field.</li>
              </ul>
            </li>

            <li>Bit 4 &longrightarrow; <b><a name="AreaExtFlags_BIT4">Repeat scattering</a></b></li>

            <li>
              Bit 5 &longrightarrow; <b><a name="AreaExtFlags_BIT5">Paletted animation</a></b>
              <ul>
                <li>(Defunct) Should cause <code><a href="#0x228">Spread Animation</a></code> to be recolored by the <code><a href="#0x218">Explosion Color</a></code> field, but instead just recolors it all black.</li>
              </ul>
            </li>

            <li>Bit 6 &longrightarrow; <span class="unknown"> Unused </span></li>
            <li>Bit 7 &longrightarrow; <span class="unknown"> Unused </span></li>
            <li>Bit 8 &longrightarrow; <span class="unknown"> Unused </span></li>

            <li>
              Bit 9 &longrightarrow; <b><a name="AreaExtFlags_BIT9">Oriented fireball puffs</a></b>
              <ul>
                <li>Will orient the <code><a href="#0x230">Ring Animation</a></code> in the direction it's travelling.</li>
                <li>It can only mirror horizontally, not vertically. The animation will need at least these 9 directions to be properly oriented: S, SSW, SW, WSW, W, WNW, NW, NNW, N</li>
              </ul>
            </li>

            <li>Bit 10 &longrightarrow; <b><a name="AreaExtFlags_BIT10">Use hit dice lookup</a></b>
              <ul>
                <li>
                  Each explosion will only affect targets whose HD/level is equal to or less than <code>XdY</code>, where <code>X = <a href="#0x244"># dice for multiple targets</a></code>, and <code>Y = <a href="#0x246">Dice size for multiple targets</a></code>.
                  <ul>
                    <li>(BUG, at least on EE games) Regardless of Dice values, it cannot affect creatures whose HD/Level is 9 or greater (hardcoded for the 6th–level spell 'Death Spell').</li>
                  </ul>
                </li>
              </ul>
            </li>

            <li>Bit 11 &longrightarrow; <span class="unknown"> Unused </span></li>
            <li>Bit 12 &longrightarrow; <span class="unknown"> Unused </span></li>

            <li>
              Bit 13 &longrightarrow; <b><a name="AreaExtFlags_BIT13">Blend area/ring animation</a></b>
              <ul>
                <li>Will add transparency to the <code><a href="#0x21C">Explosion Animation</a></code>, <code><a href="#0x228">Spread Animation</a></code>, and <code><a href="#0x230">Ring Animation</a></code>.</li>
              </ul>
            </li>

            <li>
              Bit 14 &longrightarrow; <b><a name="AreaExtFlags_BIT14">Glow area/ring animation</a></b>
              <ul>
                <li>Will brighten the <code><a href="#0x21C">Explosion Animation</a></code>, <code><a href="#0x228">Spread Animation</a></code>, and <code><a href="#0x230">Ring Animation</a></code>. (Generally make it "glow")</li>
              </ul>
            </li>

            <li>Bit 15 &longrightarrow; <b><a name="AreaExtFlags_BIT15">Hit point limit</a></b> – Used in combination with <code><a href="#AreaFlags_BIT15">Single Target</a></code> and <code><a href="#AreaExtFlags_BIT10">Use HD Lookup</a></code>:
              <ul>
                <li>Each explosion will only affect targets whose current Hit Points are equal or less than <code><a href="#0x246">Dice size for multiple targets</a></code>.</li>
                <li>Each explosion will only affect a total number of targets whose current Hit Point total is equal or less than <code><a href="#0x244"># dice for multiple targets</a></code>.</li>
              </ul>
            </li>
          </ul>
        </td>
      </tr>

      <tr>
        <td>0x00244</td>
        <td>2 (word)</td>
        <td><b><a name="0x244"># dice for multiple targets</a></b></td>
      </tr>

      <tr>
        <td>0x00246</td>
        <td>2 (word)</td>
        <td><b><a name="0x246">Dice size for multiple targets</a></b></td>
      </tr>

      <tr>
        <td>0x00248</td>
        <td>2 (word)</td>
        <td><b><a name="0x248">Animation granularity</a></b></td>
      </tr>
      <tr>
        <td>0x0024a</td>
        <td>2 (word)</td>
        <td><b><a name="0x24A">Animation granularity divider</a></b></td>
      </tr>
      <tr>
        <td>0x0024c</td>
        <td>180 (bytes)</td>
        <td>Unused</td>
      </tr>
    </tbody>
    </table>
    </div>
  </div>
</div>

